{"version":3,"sources":["actions/const.js","data-specs/accessors.js","data-specs/base.js","data-specs/global.js","data-specs/united-states.js","data-specs/utils.js","reducers/reducer.js","store.js","components/RightNav.js","pages/About.js","components/TopNavBar.js","components/NavHeader.js","components/IdSelector.js","pages/Nav.js","propTypes.js","components/BaseLineChart.js","components/FormattedLineChart.js","pages/VizPage.js","App.js","actions/csv-options.js","actions/fetch-dataset.js","index.js","actions/index.js"],"names":["US","GLOBAL","CASES","path","location","dataset","dataUrl","timestampUrl","replace","withFilters","baseAccessor","reducer","data","fs","filters","filter","id","filteredDeaths","deaths","filteredCases","cases","deathsTimestamp","casesTimestamp","computeDayOverDayChange","map","index","x","y","prev","filterBeforeDate","date","Date","getTime","dayOverDayChangeInCases","dayOverDayChangeInDeaths","mortalityRate","deathData","caseData","find","mortalityData","deathCount","caseCount","makeSpec","label","title","group","getData","getUpdatedAt","logScale","normalizeDays","Italy","UK","Singapore","France","Spain","Germany","idGroupings","ids","defaultChartId","spec","Base","California","Florida","Minnesota","Washington","toNavSpec","Object","values","keys","reduce","accum","existingPages","pages","updatedPages","initialChartState","makeInitialState","allIds","chartState","loading","makeReducer","namespace","initialState","state","action","type","value","chartId","update","globalReducer","GlobalDataSpec","usReducer","USDataSpec","combineReducers","createStore","applyMiddleware","thunkMiddleware","logger","RightNav","base","List","key","component","Typography","variant","gutterBottom","style","paddingLeft","className","Link","color","underline","NavLink","to","activeClassName","About","Container","maxWidth","target","rel","href","TopNavBar","AppBar","position","Toolbar","display","flex","flexDirection","Button","link","url","text","fontSize","NavHeader","height","paddingTop","RouterLink","marginTop","IdSelector","props","filteredIds","onFilterToggle","subheader","ListSubheader","disableSticky","icon","ListItemIcon","item","ListItem","button","onClick","ListItemText","primary","marginLeft","dense","defaultProps","allCountries","Nav","store","dispatch","split","getNamespace","pathname","global","Error","getReducer","selector","Drawer","open","PaperProps","width","Divider","marginRight","withRouter","connect","ChartData","PropTypes","arrayOf","shape","oneOfType","string","number","filterZeroValues","objectOf","bool","isRequired","func","LineChart","chart","this","renderChart","prevProps","prevState","propChange","deepEqual","stateChange","cutoff","initialData","xScale","min","max","yScale","xFormat","undefined","toLocaleDateString","month","day","gridYValues","axisLeftTickValues","axisBottom","orient","tickSize","tickPadding","tickRotation","tickValues","format","legend","toLowerCase","slice","length","legendOffset","legendPosition","axisLeft","anchor","direction","justify","translateX","translateY","itemsSpacing","itemDirection","itemWidth","itemHeight","itemOpacity","symbolSize","symbolShape","symbolBorderColor","margin","top","right","bottom","left","isInteractive","useMesh","enableGridX","enableCrosshair","legends","setTimeout","setState","React","Component","FormattedLineChart","updatedAt","logScaleToggle","normalizeDaysToggle","onControlToggle","timePart","toLocaleTimeString","hour12","hour","minute","datePart","year","updatedAtString","marginBottom","fontStyle","FormGroup","row","FormControlLabel","control","Switch","size","checked","onChange","disabled","Paper","padding","disableGutters","BaseLineChart","textAlign","match","globalSpec","usSpec","getSpec","basePath","render","content","chartSpec","App","basename","exact","VizPage","globalConfig","columnMap","Lat","Long","idMap","usConfig","UID","iso2","iso3","code3","FIPS","Admin2","Province_State","Country_Region","Long_","Combined_Key","Population","csvOptions","mapHeaders","header","prototype","hasOwnProperty","call","test","console","warn","mapValues","isNaN","parseInt","isDateString","s","combineRowsById","prevValue","nextValue","acc","createDataArray","fetchData","fetch","then","res","options","parseCsv","csv","fetchTimestamp","json","commit","committer","catch","err","error","Promise","all","rows","timestamp","ReactDOM","document","getElementById","fetchDataset"],"mappings":"mtBACaA,EAAK,KACLC,EAAS,SAITC,EAAQ,YAWRC,EAAO,SAACC,EAAUC,GAAX,gBAHF,+CAGE,gCAA2DA,EAA3D,YAAsED,EAAtE,SACPE,EAAU,SAACF,EAAUC,GAAX,gBAPD,mEAOC,YAA2CF,EAAKC,EAAUC,KAGpEE,EAAe,SAACH,EAAUC,GAAX,gBATD,+DASC,iBAAuDF,EAAKC,EAAUC,GAD/EG,QAAQ,MAAO,OACN,kCCHtBC,GDM2BH,EAAQL,EAnBnB,UAoBUK,EAAQL,EAAQC,GAGLK,EAAaN,EAvBlC,UAwBoBM,EAAaN,EAAQC,GCX3C,SAACQ,GAAD,OAAkB,SAACC,GACrC,IAAMC,EAAOF,EAAaC,GACpBE,EAJQ,SAACF,GAAD,OAAaA,EAAQG,QAIxBA,CAAQH,GAEnB,OAAOC,EAAKG,QAAO,gBAAGC,EAAH,EAAGA,GAAH,OAAYH,EAAGG,SAGvBC,EAAiBR,GAbf,SAACE,GAAD,OAAaA,EAAQO,UAcvBC,EAAgBV,GAbf,SAACE,GAAD,OAAaA,EAAQS,SAetBC,EAAkB,SAACV,GAAD,OAAaA,EAAQU,iBACvCC,EAAiB,SAACX,GAAD,OAAaA,EAAQW,gBCzB7CC,EAA0B,SAAC,GAAkB,IAAhBP,EAAe,EAAfA,GAAIJ,EAAW,EAAXA,KAQrC,MAAO,CAAEI,KAAIJ,KAPGA,EAAKY,KAAI,WAAWC,GAAW,IAAnBC,EAAkB,EAAlBA,EAAGC,EAAe,EAAfA,EACvBC,EAAOhB,EAAKa,EAAQ,GAG1B,MAAO,CAAEC,IAAGC,EAFc,IAAVF,GAA0B,IAAXG,EAAKD,EAAW,GAAMA,EAAIC,EAAKD,GAAKC,EAAKD,QAQtEE,EAAmB,SAACC,GAAD,OAAU,kBAAmB,CACpDd,GADiC,EAAGA,GAEpCJ,KAFiC,EAAOA,KAE7BG,QAAO,qBAAGW,GAAa,IAAIK,KAAKD,GAAME,gBAG7CC,EAA0B,SAACtB,GAAD,OAAaQ,EAAcR,GAASa,IAAID,GAAyBC,IAAIK,EAAiB,cAChHK,EAA2B,SAACvB,GAAD,OAAaM,EAAeN,GAASa,IAAID,GAAyBC,IAAIK,EAAiB,cAElHM,EAAgB,SAACxB,GAAD,OAAaM,EAAeN,GAASa,KAAI,YAA8B,IAA3BR,EAA0B,EAA1BA,GAAUoB,EAAgB,EAAtBxB,KAE9DyB,EAAWlB,EAAcR,GAAS2B,MAAK,SAACZ,GAAD,OAAOA,EAAEV,KAAOA,KAAIJ,KAE3D2B,EAAgBH,EAAUZ,KAAI,WAAuBC,GAAW,IAA/BC,EAA8B,EAA9BA,EAAMc,EAAwB,EAA3Bb,EAClCc,EAAYJ,EAASZ,GAAOE,EAElC,MAAO,CAAED,IAAGC,EADe,IAAdc,EAAkB,EAAID,EAAaC,MAIlD,MAAO,CAAEzB,KAAIJ,KAAM2B,MAClBf,IAAIK,EAAiB,cAIXa,EAAW,SAACC,GAAD,MAAY,CAElC,oBAAqB,CACnBC,MAAM,cAAD,OAAgBD,EAAhB,WACLE,MAAO,SACPF,MAAO,aACPG,QAAS7B,EACT8B,aAAc1B,EACd2B,UAAU,EACVC,cAAe,IAEjB,qBAAsB,CACpBL,MAAM,GAAD,OAAKD,EAAL,gCACLE,MAAO,SACPF,MAAO,iBACPG,QAASZ,EACTa,aAAc1B,GAIhB,mBAAoB,CAClBuB,MAAM,cAAD,OAAgBD,EAAhB,UACLE,MAAO,QACPF,MAAO,aACPG,QAAS3B,EACT4B,aAAczB,EACd0B,UAAU,EACVC,cAAe,IAEjB,oBAAqB,CACnBL,MAAM,GAAD,OAAKD,EAAL,+BACLE,MAAO,QACPF,MAAO,iBACPG,QAASb,EACTc,aAAczB,GAIhB,iBAAkB,CAChBsB,MAAM,GAAD,OAAKD,EAAL,mBACLE,MAAO,QACPF,MAAO,iBACPG,QAASX,EAETY,aAAc1B,KC9ELP,EAAU,CACrBoC,OAAO,EACPlD,IAAI,EACJmD,IAAI,EACJC,WAAW,EACXC,QAAQ,EACRC,OAAO,EACPC,SAAS,EACT,YAAY,GAGDC,EAAc,CACzB,CACEb,MAAO,WACPc,IAAK,CAAC,KAAM,SAAU,SAAU,WAElC,CACEd,MAAO,SACPc,IAAK,CAAC,KAAM,QAAS,SAAU,UAAW,QAAS,cAAe,UAAW,gBAE/E,CACEd,MAAO,OACPc,IAAK,CAAC,YAAa,SAAU,QAAS,cAAe,eAK1CC,EDKe,oBCJjBC,EAAOC,EAAc,UC9BrB9C,EAAU,CACrB+C,YAAY,EACZC,SAAS,EACTC,WAAW,EACX,YAAY,EACZC,YAAY,GAGDR,EAAc,CACzB,CACEb,MAAO,YACPc,IAAK,CACH,cACA,QACA,gBACA,gBACA,aACA,WACA,eACA,eACA,YAGJ,CACEd,MAAO,UACPc,IAAK,CACH,SACA,OACA,WACA,UACA,WACA,YACA,WACA,WACA,eACA,OACA,eACA,cAGJ,CACEd,MAAO,QACPc,IAAK,CACH,UACA,WACA,WACA,uBACA,UACA,UACA,WACA,YACA,WACA,cACA,iBACA,WACA,iBACA,YACA,QACA,WACA,kBAGJ,CACEd,MAAO,OACPc,IAAK,CACH,SACA,UACA,aACA,WACA,SACA,QACA,UACA,SACA,aACA,SACA,OACA,aACA,YAGJ,CACEd,MAAO,uBACPc,IAAK,CACH,iBACA,OACA,2BACA,cACA,oBAKSC,EF1De,oBE2DjBC,EAAOC,EAAc,M,SC/FrBK,EAAY,SAACN,GAAD,OAAUO,OAAOC,OAAOD,OAAOE,KAAKT,GAAMU,QAAO,SAACC,EAAOtD,GAAQ,IAAD,EAC9D2C,EAAK3C,GAAtB6B,EAD+E,EAC/EA,MAAOF,EADwE,EACxEA,MACT4B,EAAgBD,EAAMzB,GAASyB,EAAMzB,GAAO2B,MAAQ,GACpDC,EAAY,sBAAOF,GAAP,CAAsB,CAAEvD,KAAI2B,WAE9C,OAAO,eACF2B,EADL,eAEGzB,EAAQ,CAAEA,QAAO2B,MAAOC,OAE1B,MAEUC,EAAoB,SAACf,GAAD,OAAUO,OAAOE,KAAKT,GAAMU,QAAO,SAACC,EAAOtD,GAAR,sBAC/DsD,EAD+D,eAIjEtD,EAAK,CAAEgC,UAAU,EAAOC,eAAe,OACtC,KCVE0B,EAAmB,SAAC,GAAD,IAAG7D,EAAH,EAAGA,QAAS6C,EAAZ,EAAYA,KAAZ,MAAqC,CAC5DvC,MAAO,KACPE,eAAgB,KAChBJ,OAAQ,KACRG,gBAAiB,KACjBuD,OAAQ,KACR9D,UACA0C,YAPuB,EAAkBA,YAQzCqB,WAAYH,EAAkBf,GAC9BmB,SAAS,IAGLC,EAAc,SAACC,EAAWC,GAAZ,OAA6B,WAAmC,IAAlCC,EAAiC,uDAAzBD,EAAcE,EAAW,uCACjF,OAAQA,EAAOC,MACb,IAAI,GAAJ,OAAQJ,EAAR,2BACE,OAAO,eACFE,EADL,CAEEhE,OAAQiE,EAAOE,QAGnB,IAAI,GAAJ,OAAQL,EAAR,8BACE,OAAO,eACFE,EADL,CAEEN,OAAQO,EAAOE,MAAM7D,KAAI,SAACE,GAAD,OAAOA,EAAEV,MAClCI,MAAO+D,EAAOE,QAGlB,IAAI,GAAJ,OAAQL,EAAR,6BACE,OAAO,eACFE,EADL,CAEE7D,gBAAiB8D,EAAOE,QAG5B,IAAI,GAAJ,OAAQL,EAAR,gCACE,OAAO,eACFE,EADL,CAEE5D,eAAgB6D,EAAOE,QAG3B,IAAI,GAAJ,OAAQL,EAAR,qBACE,OAAO,eACFE,EADL,CAEEpE,QAAQ,eACHoE,EAAMpE,QADJ,eAEJqE,EAAOnE,IAAMkE,EAAMpE,QAAQqE,EAAOnE,QAIzC,IAAI,GAAJ,OAAQgE,EAAR,wBACE,OAAO,eACFE,EADL,CAEEL,WAAW,eACNK,EAAML,WADD,eAEPM,EAAOE,MAAMC,QAFN,eAGHJ,EAAML,WAAWM,EAAOE,MAAMC,SAH3B,GAIHH,EAAOE,MAAME,YAKxB,IAAI,GAAJ,OAAQP,EAAR,gBACE,OAAO,eACFE,EADL,CAEEJ,SAAS,IAGb,QAAS,OAAOI,KAIPM,EAAgBT,EAAY9E,EAAQ0E,EAAiBc,IACrDC,EAAYX,EAAY/E,EAAI2E,EAAiBgB,ICtEpDhF,EAAUiF,aAAe,mBAC5B3F,EAASuF,GADmB,cAE5BxF,EAAK0F,GAFuB,IAKhBG,cACblF,EACAmF,YACEC,IACAC,M,sDC0DWC,GA7BE,SAAC,GAAD,IAAGtC,EAAH,EAAGA,KAAMuC,EAAT,EAASA,KAAT,OACf,yBAAKlF,GAAG,aACL2C,EAAKnC,KAAI,gBAAGqB,EAAH,EAAGA,MAAO2B,EAAV,EAAUA,MAAV,OACR,kBAAC2B,GAAA,EAAD,CACEC,IAAKvD,EACLwD,UAAU,OAEV,kBAACC,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,EAACC,MAAO,CAAEC,YAAa,SAAW7D,GACzE2B,EAAMhD,KAAI,gBAAGR,EAAH,EAAGA,GAAI2B,EAAP,EAAOA,MAAP,OACT,wBAAIgE,UAAU,iBAAiBP,IAAKpF,GAClC,kBAAC4F,GAAA,EAAD,CACEC,MAAM,gBACNC,UAAU,OACVP,QAAQ,QACRF,UAAWU,IACXC,GAAE,UAAKd,EAAL,YAAalF,GACfiG,gBAAgB,UAEftE,aCcAuE,GApED,kBACZ,yBAAKlG,GAAG,kBACN,kBAACmG,GAAA,EAAD,CAAWC,SAAS,KAAKpG,GAAG,gBAC1B,kBAACsF,EAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GAArC,sBAGA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,qRAOA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,+NAKA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,SAApB,8CAGA,4BACE,4BACE,kBAACK,GAAA,EAAD,CACEL,QAAQ,QACRF,UAAWU,IACXC,GAAG,4BAHL,6BAQF,4BACE,kBAACJ,GAAA,EAAD,CACEL,QAAQ,QACRF,UAAWU,IACXC,GAAG,kCAHL,yBASJ,kBAACV,EAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GAArC,QACA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,gGAGE,uBAAGa,OAAO,SAASC,IAAI,sBAAsBC,KAAK,8CAAlD,UAHF,MAMA,kBAACjB,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,8JAIA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,KAAKC,cAAY,GAArC,0BACA,kBAACF,EAAA,EAAD,CAAYC,QAAQ,QAAQC,cAAY,GAAxC,cAEG,IACD,uBAAGa,OAAO,SAASC,IAAI,sBAAsBC,KAAK,8BAAlD,WACC,KAJH,sBAMG,IACD,uBAAGF,OAAO,SAASC,IAAI,sBAAsBC,KAAK,wCAAlD,UAPF,MAWF,kBAAC,GAAD,CAAUrB,KAAK,IAAIvC,KAAM,O,kDChDd6D,GAlBG,kBAChB,kBAACC,GAAA,EAAD,CAAQC,SAAS,QAAQb,MAAM,UAAU7F,GAAG,WAC1C,kBAAC2G,GAAA,EAAD,KACE,yBAAKlB,MAAO,CACVmB,QAAS,OACTC,KAAM,OACNC,cAAe,gBAGf,kBAACC,GAAA,EAAD,CAAQlB,MAAM,UAAUR,UAAWU,IAASE,gBAAgB,SAASD,GAAG,kBAAxE,iBACA,kBAACe,GAAA,EAAD,CAAQlB,MAAM,UAAUR,UAAWU,IAASE,gBAAgB,SAASD,GAAG,WAAxE,UACA,kBAACe,GAAA,EAAD,CAAQlB,MAAM,UAAUR,UAAWU,IAASE,gBAAgB,SAASD,GAAG,KAAxE,aCZFgB,GAAO,SAACC,EAAKC,GAAN,OACX,kBAACtB,GAAA,EAAD,CACEW,KAAMU,EACNZ,OAAO,SACPC,IAAI,sBACJT,MAAM,gBACNN,QAAQ,QACRE,MAAO,CAAE0B,SAAU,SAElBD,IAsBUE,GAlBG,kBAChB,yBAAK3B,MAAO,CAAEmB,QAAS,SACrB,yBAAKnB,MAAO,CACV4B,OAAQ,OACR3B,YAAa,OACb4B,WAAY,QAGZ,kBAAC1B,GAAA,EAAD,CAAMP,UAAWkC,IAAYvB,GAAG,IAAIH,MAAM,gBAAgBN,QAAQ,KAAKE,MAAO,CAAE+B,UAAW,QAA3F,mBACA,6BACGR,GAAK,6BAA8B,WACpC,kBAAC1B,EAAA,EAAD,CAAYD,UAAU,OAAOQ,MAAM,gBAAgBN,QAAQ,QAAQE,MAAO,CAAE0B,SAAU,SAAtF,OACCH,GAAK,uCAAwC,c,6DCVhDS,GAAa,SAACC,GAAW,IACrBC,EAA6CD,EAA7CC,YAAanF,EAAgCkF,EAAhClF,YAAaoF,EAAmBF,EAAnBE,eAE5BC,EAAY,SAAClG,GAAD,OAAW,kBAACmG,GAAA,EAAD,CAAeC,eAAa,EAAC1C,UAAU,OAAO1D,IAErEqG,EAAO,kBAACC,GAAA,EAAD,KAAc,kBAAC,KAAD,CAAWpC,MAAM,UAAUsB,SAAS,WAEzDe,EAAO,SAAClI,GAAD,OACX,kBAACmI,GAAA,EAAD,CAAU/C,IAAKpF,EAAIoI,QAAM,EAACC,QAAS,kBAAMT,EAAe5H,KACtD,kBAACsI,GAAA,EAAD,CAAclD,IAAKpF,EAAIuI,QAASvI,EAAIyF,MAAO,CAAE+C,WAAY,UACxDb,EAAY3H,GAAMgI,EAAO,OAI9B,OAAOxF,EAAYhC,KAAI,gBAAGmB,EAAH,EAAGA,MAAOc,EAAV,EAAUA,IAAV,OACrB,kBAAC0C,GAAA,EAAD,CAAME,UAAU,MAAMD,IAAKzD,EAAO8G,OAAK,EAACZ,UAAWA,EAAUlG,IAC1Dc,EAAIjC,IAAI0H,QAMfT,GAAWiB,aA1BU,CACnBC,aAAc,MA2BDlB,UCCTmB,GAAM,SAAClB,GAAW,IACdmB,EAA8BnB,EAA9BmB,MAAOC,EAAuBpB,EAAvBoB,SAGT9E,EApBa,SAAC7E,GACpB,OAAQA,EAAK4J,MAAM,KAAK,IACtB,IAAK,SAAU,OAAO9J,EACtB,IAAK,gBAAiB,OAAOD,EAC7B,QAAS,OAAO,MAgBAgK,CAHoBtB,EAAbtI,SAGe6J,UAClCtJ,EAAUqE,GAbC,SAACA,EAAW6E,GAC7B,OAAQ7E,GACN,KAAK/E,EAAQ,OAAO4J,EAAMK,OAC1B,KAAKlK,EAAI,OAAO6J,EAAM7J,GACtB,QAAS,MAAM,IAAImK,MAAJ,8CAAiDnF,KASrCoF,CAAWpF,EAAW6E,GAL9B,EAMYlJ,GAAW,GAApCG,EANa,EAMbA,QAAS0C,EANI,EAMJA,YAOX6G,EAAW1J,EAEb,kBAAC,GAAD,CACEgI,YAAa7H,EACb0C,YAAaA,EACboF,eAViB,SAAC5H,GAAD,OAAQ8I,EAAS,CACtC1E,KAAK,GAAD,OAAKJ,EAAL,qBACJhE,UAWE,KAEJ,OACE,6BACE,kBAAC,GAAD,MACA,yBAAKA,GAAG,YACN,kBAACsJ,GAAA,EAAD,CACE/D,QAAQ,YACRgE,MAAI,EACJC,WAAY,CAAE/D,MAAO,CAAEgE,MAAO,WAE9B,kBAAC,GAAD,MACA,kBAACC,GAAA,EAAD,CAASjE,MAAO,CAAEkE,YAAa,UAC9BN,MAQXT,GAAIF,aAhEiB,GAkErB,IAEekB,eAAWC,aAFF,SAAChB,GAAD,MAAY,CAAEA,WAEZgB,CAAyBjB,K,gIC1FtCkB,GAAYC,KAAUC,QACjCD,KAAUE,MAAM,CACdvJ,EAAGqJ,KAAUG,UAAU,CAACH,KAAUI,OAAQJ,KAAUK,SACpDzJ,EAAGoJ,KAAUG,UAAU,CAACH,KAAUI,OAAQJ,KAAUK,YCuBlDC,IDnBiBN,KAAUE,MAAM,CACrC7J,MAAO0J,GACP5J,OAAQ4J,GACRhK,QAASiK,KAAUO,SAASP,KAAUQ,MAAMC,WAC5C3G,WAAYkG,KAAUO,SACpBP,KAAUE,MAAM,CACdjI,SAAU+H,KAAUQ,KACpBtI,cAAe8H,KAAUQ,QAE3BC,aAGqBT,KAAUE,MAAM,CACvCrI,MAAOmI,KAAUI,OACjBtI,MAAOkI,KAAUI,OACjBxI,MAAOoI,KAAUI,OACjBrI,QAASiI,KAAUU,KACnB1I,aAAcgI,KAAUU,KACxBzI,SAAU+H,KAAUQ,KACpBtI,cAAe8H,KAAUK,SCAF,SAAC,GAAD,MAAmB,CAC1CpK,GADuB,EAAGA,GAE1BJ,KAFuB,EAAOA,KAEnBG,QAAO,mBAAiB,IAAjB,EAAGY,QAGjB+J,G,oDACJ,WAAYhD,GAAQ,IAAD,+BACjB,cAAMA,IAEDxD,MAAQ,CACXyG,MAAO,MAJQ,E,iEAajBC,KAAKC,gB,yCAGYC,EAAWC,GAC5B,IAAMC,GAAcC,KAAUH,EAAWF,KAAKlD,OAMxCwD,GAAeD,KAAU,eAAKF,EAAN,CAAiBJ,MAAO,OAAxB,eAAqCC,KAAK1G,MAA1C,CAAiDyG,MAAO,SAElFK,GAAcE,IAChBN,KAAKC,gB,oCAIM,IA5CSM,EA4CV,SAGRP,KAAKlD,MADD0D,EAFI,EAEVxL,KAAmBoC,EAFT,EAESA,SAAUC,EAFnB,EAEmBA,cAAeJ,EAFlC,EAEkCA,MAG1CjC,EAAOwL,EACPnJ,IAlDkBkJ,EAmDIlJ,EAAxBrC,EAAuCA,EAnDOY,KAAI,SAAC0H,GACvD,IAAMtI,EAAOsI,EAAKtI,KACfG,QAAO,qBAAGY,GAAawK,KACvB3K,KAAI,WAAQC,GAAR,MAAmB,CAAEC,EAAGD,EAAOE,EAA/B,EAAGA,MAEV,OAAO,eAAKuH,EAAZ,CAAkBtI,aAiDZoC,IAEFpC,EAAOA,EAAKY,IAAI6J,KAGlB,IAAMgB,EAAS,CACbjH,KAAM,SACNkH,IAAKrJ,EAAgB,EAAI,OACzBsJ,IAAK,QAGDC,EAASxJ,EACX,CAAEoC,KAAM,MAAOc,KAAM,GAAIqG,IAAK,KAC9B,CAAEnH,KAAM,SAAUkH,IAAK,EAAGC,IAAK,QAE7BE,EAAUxJ,OACZyJ,EACA,SAAChL,GAAD,OAAO,IAAIK,KAAKL,GAAGiL,mBAAmB,QAAS,CAAEC,MAAO,QAASC,IAAK,aAEpEC,EAAc9J,EAChB,CAAC,GAAI,IAAK,IAAM,IAAO,IAAQ,IAAS,UACxC0J,EAEEK,EAAqB/J,EACvB,CAAC,GAAI,IAAK,IAAM,IAAO,IAAQ,IAAS,UACxC0J,EAOEM,EAAa,CACjBC,OAAQ,SACRC,SAAU,EACVC,YAAa,EACbC,aAAcnK,EAAgB,GAAK,GACnCoK,WAAY,GACZC,OAAQb,EACRc,OAZmBtK,EAAa,+BAENA,EAFM,cAEaJ,EAAM2K,cAAcC,MAAM,EAAG5K,EAAM6K,OAAS,IACvF,OAUFC,aAAc,GACdC,eAAgB,UAGZC,EAAW,CACfZ,OAAQ,OACRI,WAAYN,EACZG,SAAU,EACVC,YAAa,EACbC,aAAc,EACdG,OAAQ,QACRI,cAAe,GACfC,eAAgB,UAKZL,EAAS,CACbO,OAAmC,YACnCC,UAAiC,SACjCC,SAAS,EACTC,WAAgC,IAChCC,WAAgC,EAChCC,aAAc,EACdC,cAAe,gBACfC,UAAW,GACXC,WAAY,GACZC,YAAa,IACbC,WAAY,GACZC,YAAa,SACbC,kBAAmB,qBAGf/C,EACJ,kBAAC,KAAD,CACE/K,KAAMA,EACN+N,OAAQ,CACNC,IAAK,GAAIC,MAA0B,IAAKC,OAAQ,GAAIC,KAAM,IAE5D1C,OAAQA,EACRG,OAAQA,EACRC,QAASA,EACTO,WAAYA,EACZF,YAAaA,EACbe,SAAUA,EACVmB,eAAa,EAEbC,SAAO,EACPC,aAAa,EACbC,iBAAiB,EAajBC,QAAS,CAAC7B,KAKd8B,YAAW,kBAAM,EAAKC,SAAS,CAAE3D,YAAU,K,+BAM3C,OAFkBC,KAAK1G,MAAfyG,U,GAxJY4D,IAAMC,WA+J9B9D,GAAUhC,aAjLW,CACnB1G,UAAU,EACVC,cAAe,MAiLFyI,UClKT+D,GAAqB,SAAC/G,GAAW,IAEnC9F,EASE8F,EATF9F,MACAhC,EAQE8H,EARF9H,KACA8O,EAOEhH,EAPFgH,UACAC,EAMEjH,EANFiH,eACAC,EAKElH,EALFkH,oBACA5M,EAIE0F,EAJF1F,SACAC,EAGEyF,EAHFzF,cACA4M,EAEEnH,EAFFmH,gBACAhN,EACE6F,EADF7F,MAGIf,EAAO,IAAIC,KAAK2N,GAEhBI,EAAWhO,EAAKiO,mBAAmB,GAAI,CAAEC,QAAQ,EAAMC,KAAM,UAAWC,OAAQ,YAChFC,EAAWrO,EAAK6K,mBAAmB,GAAI,CAAEyD,KAAM,UAAWxD,MAAO,OAAQC,IAAK,YAE9EwD,EAAkBX,EAAS,qBACfI,EADe,eACAK,EADA,KAE7B,wCAEJ,OACE,6BACE,kBAAC7J,EAAA,EAAD,CAAYC,QAAQ,KAAKE,MAAO,CAAE6J,aAAc,SAAW1N,GAC3D,kBAAC0D,EAAA,EAAD,CACEC,QAAQ,UACRqB,QAAQ,QACRpB,cAAY,EACZC,MAAO,CAAE8J,UAAW,SAAUD,aAAc,OAAQ9H,UAAW,SAE9D6H,GAEH,kBAACG,GAAA,EAAD,CAAWxP,GAAG,gBAAgByP,KAAG,EAAChK,MAAO,CAAEqB,cAAe,cAAewI,aAAc,QACrF,kBAACI,GAAA,EAAD,CACEC,QAAS,kBAACC,GAAA,EAAD,CAAQC,KAAK,QAAQC,QAAS9N,EAAU+N,SAAU,kBAAMlB,EAAgB,eACjFlN,MAAM,YACNqO,UAAWrB,IAEb,kBAACe,GAAA,EAAD,CACEC,QAAS,kBAACC,GAAA,EAAD,CAAQC,KAAK,QAAQC,QAAS7N,EAAe8N,SAAU,kBAAMlB,EAAgB,oBACtFlN,MAAM,iBACNqO,UAAWpB,KAGf,kBAACqB,GAAA,EAAD,CACE1K,QAAQ,WACRE,MAAO,CACL+B,UAAW,OACX8H,aAAc,MACd3B,OAAQ,OACRuC,QAAS,YAGX,kBAAC/J,GAAA,EAAD,CAAWV,MAAO,CAAE4B,OAAQ,QAASjB,SAAU,SAAW+J,gBAAc,GACtE,kBAACC,GAAD,CACExQ,KAAMA,EACNoC,SAAUA,EACVC,cAAeA,EAAgB2M,OAAsBlD,EACrD7J,MAAOA,MAIb,kBAACyD,EAAA,EAAD,CACEC,QAAQ,UACRqB,QAAQ,QACRpB,cAAY,EACZC,MAAO,CACL4K,UAAW,SAAUd,UAAW,SAAUD,aAAc,OAAQ9H,UAAW,SAL/E,UASG,IACD,uBAAGnB,OAAO,SAASC,IAAI,sBAAsBC,KAAK,8CAAlD,0EAVF,OAkBNkI,GAAmB/F,aAvFE,CACnBgG,UAAW,KACXC,gBAAgB,EAChBC,qBAAqB,GAsFRH,UCQA5E,gBAFS,SAAChB,GAAD,MAAY,CAAEA,WAEvBgB,EArEC,SAACnC,GAAW,IAExBmB,EAIEnB,EAJFmB,MACAyH,EAGE5I,EAHF4I,MACAlR,EAEEsI,EAFFtI,SACA0J,EACEpB,EADFoB,SAGI9E,EAhCa,SAAC7E,GACpB,OAAQA,GACN,IAAK,UAAW,OAAOF,EACvB,IAAK,iBAAkB,OAAOD,EAC9B,QAAS,MAAM,IAAImK,MAAJ,gDAAmDhK,KA4BlD6J,CAAasH,EAAMnR,MARZ,EAhBX,SAAC6E,GACf,OAAQA,GACN,KAAK/E,EAAQ,OAAOsR,EACpB,KAAKvR,EAAI,OAAOwR,EAChB,QAAS,MAAM,IAAIrH,MAAJ,2CAA8CnF,KAqB9ByM,CAAQzM,GAAjCrB,EATiB,EASjBA,KAAMD,EATW,EASXA,eACR/C,EAlBW,SAACqE,EAAW6E,GAC7B,OAAQ7E,GACN,KAAK/E,EAAQ,OAAO4J,EAAMK,OAC1B,KAAKlK,EAAI,OAAO6J,EAAM7J,GACtB,QAAS,MAAM,IAAImK,MAAJ,8CAAiDnF,KAclDoF,CAAWpF,EAAW6E,GAChC6H,EAAWJ,EAAMnR,KAEjBwR,EAAS,SAACC,GAAD,OACb,yBAAK5Q,GAAG,kBACN,kBAACmG,GAAA,EAAD,CAAWC,SAAS,KAAKpG,GAAG,gBACzB4Q,GAEH,kBAAC,GAAD,CAAU1L,KAAMwL,EAAU/N,KAAMM,EAAUN,OAIxC2B,EAAUlF,EAAS6J,SAASF,MAAM,KAAK,GACvC8H,EAAYlO,EAAK2B,GAGvB,IAAKA,IAAYuM,EACf,OAAO,kBAAC,IAAD,CAAU7K,GAAE,UAAK0K,EAAL,YAAiBhO,KAGtC,GAAI/C,EAAQmE,QACV,OAAO6M,EAAO,0CAGhB,IAAM9M,EAAalE,EAAQkE,WAAWS,GAEhC1E,EAAOiR,EAAU/O,QAAQnC,GACzB+O,EAAYmC,EAAU9O,aAAapC,GAOzC,OAAOgR,EACL,kBAAC,GAAD,CAEE/O,MAAOiP,EAAUjP,MACjBhC,KAAMA,EACN8O,UAAWA,EACXC,eAAgBkC,EAAU7O,SAC1B4M,oBAAqBiC,EAAU5O,cAC/B4B,WAAYA,EACZhC,MAAOgP,EAAUhP,MAGjBG,SAAU6B,EAAW7B,SACrBC,cAAe4B,EAAW5B,cAG1B4M,gBArBoB,SAACzJ,GAAD,OAAS0D,EAAS,CACxC1E,KAAK,GAAD,OAAKJ,EAAL,wBACJK,MAAO,CAAEC,UAASC,OAAO,eAAIa,GAAOvB,EAAWuB,cCtEpC0L,OAhBf,WACE,OACE,kBAAC,IAAD,CAAYC,SAAS,KACnB,yBAAKtL,MAAO,CAAEmB,QAAS,SACrB,kBAAC,GAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOoK,OAAK,EAAC7R,KAAK,IAAIkG,UAAWa,KACjC,kBAAC,IAAD,CAAO/G,KAAK,UAAUkG,UAAW4L,KACjC,kBAAC,IAAD,CAAO9R,KAAK,iBAAiBkG,UAAW4L,KACxC,kBAAC,IAAD,CAAON,OAAQ,kBAAM,kBAAC,IAAD,CAAU3K,GAAG,a,8BClB/BkL,GAAe,CAC1BC,UAAW,CAET,iBAAkB,KAClBC,IAAK,KACLC,KAAM,KAGN,iBAAkB,MAEpBC,MAAO,CACL,eAAgB,cAChB,UAAW,SACX,iBAAkB,OAITC,GAAW,CACtBJ,UAAW,CACTK,IAAK,KACLC,KAAM,KACNC,KAAM,KACNC,MAAO,KACPC,KAAM,KACNC,OAAQ,KACRC,eAAgB,KAChBC,eAAgB,KAChBX,IAAK,KACLY,MAAO,KACPC,aAAc,KACdC,WAAY,cAEdZ,MAAO,IAKIa,GAAa,SAAC,GAAD,IAAGhB,EAAH,EAAGA,UAAWG,EAAd,EAAcA,MAAd,MAA2B,CACnDc,WAAY,YAAwB,IAArBC,EAAoB,EAApBA,OAAoB,EAAZ5R,MACrB,OAAIyC,OAAOoP,UAAUC,eAAeC,KAAKrB,EAAWkB,GAC3ClB,EAAUkB,GAIf,0BAA0BI,KAAKJ,GAC1B,IAAItR,KAAKsR,GAAQrR,WAI1B0R,QAAQC,KAAK,0BAA2BN,GAEjCA,IAETO,UAAW,YAA+B,IAA5BP,EAA2B,EAA3BA,OAAehO,GAAY,EAAnB5D,MAAmB,EAAZ4D,OAC3B,OAnByBwO,MAmBRR,GAEF,OAAXA,GAAmBf,EAAMjN,GACpBiN,EAAMjN,GAGRA,EAN0ByO,SAASzO,EAAO,OC9C/C0O,GAAe,SAACC,GAAD,OAAQH,MAAMG,IAE7BC,GAAkB,SAAC3P,EAAOmM,GAC9B,IAAMyD,EAAY5P,EAAMmM,EAAIzP,KAAO,GAI7BmT,EAFWjQ,OAAOE,KAAKqM,GAAK1P,OAAOgT,IAEd1P,QAAO,SAAC+P,EAAKhO,GAAN,sBAC7BgO,EAD6B,eAE/BhO,EAAMqK,EAAIrK,IAAQ8N,EAAU9N,IAAQ,OACnC,CAAEpF,GAAIyP,EAAIzP,KAEd,OAAO,eACFsD,EADL,eAEGmM,EAAIzP,GAAKmT,KAIRE,GAAkB,SAAC5D,GACvB,IAEM7P,EAFWsD,OAAOE,KAAKqM,GAAK1P,OAAOgT,IAEnBvS,KAAI,SAAC4E,GAAD,MAAU,CAClC1E,EAAG0E,EACHzE,EAAG8O,EAAIrK,MACL,IAEJ,MAAO,CAAEpF,GAAIyP,EAAIzP,GAAIJ,SAGjB0T,GAAY,SAAClU,EAAUC,GAAX,OAAuBkU,MAAMjU,EAAQF,EAAUC,IAC9DmU,MAAK,SAACC,GAAD,OAASA,EAAIvM,UAClBsM,MAAK,SAAC9S,GACL,IACMgT,EAAUvB,GADD/S,IAAaH,EAASiS,GAAeK,IAGpD,OAAOoC,KAASjT,EAAGgT,MAEpBF,MAAK,SAACI,GAAD,OAAS1Q,OAAOC,OAAOyQ,EAAIvQ,OAAO4P,GAAiB,KACtDzS,IAAI6S,QAEHQ,GAAiB,SAACzU,EAAUC,GAAX,OAAuBkU,MAAMhU,EAAaH,EAAUC,IACxEmU,MAAK,SAACC,GAAD,OAASA,EAAIK,UAClBN,MAAK,SAAC5T,GAAD,OAAWA,EAAK,GAAKA,EAAK,GAAGmU,OAAOC,UAAUlT,KAAO,QAC1DmT,OAAM,SAACC,GAEN,OADAxB,QAAQyB,MAAM,4BAA6BD,GACpC,SAGI,YAAClQ,EAAW3E,GAAZ,OAAwB,SAACyJ,GAAD,OAAcsL,QAAQC,IAAI,CAC/Df,GAAUtP,EAAW3E,GAASmU,MAAK,SAACc,GAAD,OAAUxL,EAAS,CACpD1E,KAAK,GAAD,OAAKJ,EAAL,4BAAkC3E,GACtCgF,MAAOiQ,OAETT,GAAe7P,EAAW3E,GAASmU,MAAK,SAACe,GAAD,OAAezL,EAAS,CAC9D1E,KAAK,GAAD,OAAKJ,EAAL,8BAAoC3E,GACxCgF,MAAOkQ,WCpDXC,IAAS7D,OACP,kBAAC,IAAD,CAAU9H,MAAOA,GACf,kBAAC,GAAD,OAEF4L,SAASC,eAAe,SAG1B7L,EAAMC,UCZ+B,SAACA,GAAD,OAAcsL,QAAQC,IAAI,CAC7DM,GAAa1V,EtBFO,SsBEpB0V,CAA6B7L,GAC7B6L,GAAa1V,EAAQC,EAArByV,CAA4B7L,KAC3B0K,MAAK,kBAAM1K,EAAS,CACrB1E,KAAK,GAAD,OAAKnF,EAAL,wBDSN4J,EAAMC,UCN2B,SAACA,GAAD,OAAcsL,QAAQC,IAAI,CACzDM,GAAa3V,EtBTO,SsBSpB2V,CAAyB7L,GACzB6L,GAAa3V,EAAIE,EAAjByV,CAAwB7L,KACvB0K,MAAK,kBAAM1K,EAAS,CACrB1E,KAAK,GAAD,OAAKpF,EAAL,0B","file":"static/js/main.c65b1a7e.chunk.js","sourcesContent":["// locations\nexport const US = 'US';\nexport const GLOBAL = 'global';\n\n// datasets\nexport const DEATHS = 'deaths';\nexport const CASES = 'confirmed';\n\nexport const OWNER = 'CSSEGISandData';\nexport const REPO = 'COVID-19';\n\nconst BASE_DATA_URL = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master';\nconst BASE_TIMESTAMP_URL = 'https://api.github.com/repos/CSSEGISandData/COVID-19/commits';\n\nconst BASE_PATH = 'csse_covid_19_data/csse_covid_19_time_series';\n\n// helpers\nexport const path = (location, dataset) => `${BASE_PATH}/time_series_covid19_${dataset}_${location}.csv`;\nexport const dataUrl = (location, dataset) => `${BASE_DATA_URL}/${path(location, dataset)}`;\n\nconst f = (s) => s.replace(/\\//g, '%2F');\nexport const timestampUrl = (location, dataset) => `${BASE_TIMESTAMP_URL}?path=${f(path(location, dataset))}&page=1&per_page=1&ref=master`;\n\n// data\nexport const GLOBAL_DEATHS_URL = dataUrl(GLOBAL, DEATHS);\nexport const GLOBAL_CASES_URL = dataUrl(GLOBAL, CASES);\n\n// timestamps\nexport const GLOBAL_DEATHS_TIMESTAMP_URL = timestampUrl(GLOBAL, DEATHS);\nexport const GLOBAL_CASES_TIMESTAMP_URL = timestampUrl(GLOBAL, CASES);\n","/*\n  Assumes reducer shape of\n  {\n    cases: ChartData,\n    casesTimestamp: string,\n    deaths: ChartData,\n    deathsTimestamp, string,\n    filters: {string: bool}\n  }\n*/\n\n// base accessors\nconst deaths = (reducer) => reducer.deaths;\nconst cases = (reducer) => reducer.cases;\n\n// TODO: reducer should be made generic\nconst filters = (reducer) => reducer.filters;\n\nconst withFilters = (baseAccessor) => (reducer) => {\n  const data = baseAccessor(reducer);\n  const fs = filters(reducer);\n\n  return data.filter(({ id }) => fs[id]);\n};\n\nexport const filteredDeaths = withFilters(deaths);\nexport const filteredCases = withFilters(cases);\n\nexport const deathsTimestamp = (reducer) => reducer.deathsTimestamp;\nexport const casesTimestamp = (reducer) => reducer.casesTimestamp;\n","import {\n  filteredCases, filteredDeaths, deathsTimestamp, casesTimestamp,\n} from './accessors';\n\nconst computeDayOverDayChange = ({ id, data }) => {\n  const changes = data.map(({ x, y }, index) => {\n    const prev = data[index - 1];\n    const change = (index === 0 || prev.y === 0) ? 0 : ((y - prev.y) / prev.y);\n\n    return { x, y: change };\n  });\n\n  return { id, data: changes };\n};\n\nconst filterBeforeDate = (date) => ({ id, data }) => ({\n  id,\n  data: data.filter(({ x }) => x >= new Date(date).getTime()),\n});\n\nconst dayOverDayChangeInCases = (reducer) => filteredCases(reducer).map(computeDayOverDayChange).map(filterBeforeDate('3/5/2020'));\nconst dayOverDayChangeInDeaths = (reducer) => filteredDeaths(reducer).map(computeDayOverDayChange).map(filterBeforeDate('3/5/2020'));\n\nconst mortalityRate = (reducer) => filteredDeaths(reducer).map(({ id, data: deathData }) => {\n  // TODO: inefficient to filter cases every map\n  const caseData = filteredCases(reducer).find((x) => x.id === id).data;\n\n  const mortalityData = deathData.map(({ x, y: deathCount }, index) => {\n    const caseCount = caseData[index].y;\n    const rate = caseCount === 0 ? 0 : deathCount / caseCount;\n    return { x, y: rate };\n  });\n\n  return { id, data: mortalityData };\n}).map(filterBeforeDate('3/5/2020'));\n\nexport const defaultChartId = 'deaths-cumulative';\n\nexport const makeSpec = (label) => ({\n  // deaths\n  'deaths-cumulative': {\n    title: `Cumulative ${label} Deaths`,\n    group: 'Deaths',\n    label: 'Cumulative',\n    getData: filteredDeaths,\n    getUpdatedAt: deathsTimestamp,\n    logScale: true,\n    normalizeDays: 10,\n  },\n  'deaths-change-rate': {\n    title: `${label} Deaths Daily Rate of Change`,\n    group: 'Deaths',\n    label: 'Rate of Change',\n    getData: dayOverDayChangeInDeaths,\n    getUpdatedAt: deathsTimestamp,\n  },\n\n  // cases\n  'cases-cumulative': {\n    title: `Cumulative ${label} Cases`,\n    group: 'Cases',\n    label: 'Cumulative',\n    getData: filteredCases,\n    getUpdatedAt: casesTimestamp,\n    logScale: true,\n    normalizeDays: 50,\n  },\n  'cases-change-rate': {\n    title: `${label} Cases Daily Rate of Change`,\n    group: 'Cases',\n    label: 'Rate of Change',\n    getData: dayOverDayChangeInCases,\n    getUpdatedAt: casesTimestamp,\n  },\n\n  // other\n  'mortality-rate': {\n    title: `${label} Mortality Rate`,\n    group: 'Other',\n    label: 'Mortality Rate',\n    getData: mortalityRate,\n    // TODO: should really take most recent of the two\n    getUpdatedAt: deathsTimestamp,\n  },\n});\n","import * as Base from './base';\n\n// export const INITIAL_FILTERS\n\nexport const filters = {\n  Italy: true,\n  US: true,\n  UK: true,\n  Singapore: true,\n  France: false,\n  Spain: false,\n  Germany: false,\n  'S. Korea': false,\n};\n\nexport const idGroupings = [\n  {\n    label: 'Americas',\n    ids: ['US', 'Canada', 'Mexico', 'Brazil'],\n  },\n  {\n    label: 'Europe',\n    ids: ['UK', 'Spain', 'France', 'Germany', 'Italy', 'Switzerland', 'Belgium', 'Netherlands'],\n  },\n  {\n    label: 'APAC',\n    ids: ['Singapore', 'Taiwan', 'Japan', 'South Korea', 'Australia'],\n  },\n];\n\n\nexport const { defaultChartId } = Base;\nexport const spec = Base.makeSpec('Global');\n","import * as Base from './base';\n\nexport const filters = {\n  California: true,\n  Florida: true,\n  Minnesota: true,\n  'New York': true,\n  Washington: true,\n};\n\nexport const idGroupings = [\n  {\n    label: 'Northeast',\n    ids: [\n      'Connecticut',\n      'Maine',\n      'Massachusetts',\n      'New Hampshire',\n      'New Jersey',\n      'New York',\n      'Pennsylvania',\n      'Rhode Island',\n      'Vermont',\n    ],\n  },\n  {\n    label: 'Midwest',\n    ids: [\n      'Kansas',\n      'Iowa',\n      'Illinois',\n      'Indiana',\n      'Michigan',\n      'Minnesota',\n      'Missouri',\n      'Nebraska',\n      'North Dakota',\n      'Ohio',\n      'South Dakota',\n      'Wisconsin',\n    ],\n  },\n  {\n    label: 'South',\n    ids: [\n      'Alabama',\n      'Arkansas',\n      'Delaware',\n      'District of Columbia',\n      'Florida',\n      'Georgia',\n      'Kentucky',\n      'Louisiana',\n      'Maryland',\n      'Mississippi',\n      'North Carolina',\n      'Oklahoma',\n      'South Carolina',\n      'Tennessee',\n      'Texas',\n      'Virginia',\n      'West Virginia',\n    ],\n  },\n  {\n    label: 'West',\n    ids: [\n      'Alaska',\n      'Arizona',\n      'California',\n      'Colorado',\n      'Hawaii',\n      'Idaho',\n      'Montana',\n      'Nevada',\n      'New Mexico',\n      'Oregon',\n      'Utah',\n      'Washington',\n      'Wyoming',\n    ],\n  },\n  {\n    label: 'Other US Territories',\n    ids: [\n      'American Samoa',\n      'Guam',\n      'Northern Mariana Islands',\n      'Puerto Rico',\n      'Virgin Islands',\n    ],\n  },\n];\n\nexport const { defaultChartId } = Base;\nexport const spec = Base.makeSpec('US');\n","export const toNavSpec = (spec) => Object.values(Object.keys(spec).reduce((accum, id) => {\n  const { group, label } = spec[id];\n  const existingPages = accum[group] ? accum[group].pages : [];\n  const updatedPages = [...existingPages, { id, label }];\n\n  return {\n    ...accum,\n    [group]: { group, pages: updatedPages },\n  };\n}, {}));\n\nexport const initialChartState = (spec) => Object.keys(spec).reduce((accum, id) => ({\n  ...accum,\n  // logScale always false for now, allow users to toggle on\n  // normalizeDays always false for now, allow users to toggle on\n  [id]: { logScale: false, normalizeDays: false },\n}), {});\n","import { GLOBAL, US } from '../actions/const';\nimport * as GlobalDataSpec from '../data-specs/global';\nimport * as USDataSpec from '../data-specs/united-states';\n\nimport { initialChartState } from '../data-specs/utils';\n\nconst makeInitialState = ({ filters, spec, idGroupings }) => ({\n  cases: null,\n  casesTimestamp: null,\n  deaths: null,\n  deathsTimestamp: null,\n  allIds: null,\n  filters,\n  idGroupings,\n  chartState: initialChartState(spec),\n  loading: true,\n});\n\nconst makeReducer = (namespace, initialState) => (state = initialState, action) => {\n  switch (action.type) {\n    case `${namespace}_FETCHED_DATASET_deaths`:\n      return {\n        ...state,\n        deaths: action.value,\n      };\n\n    case `${namespace}_FETCHED_DATASET_confirmed`:\n      return {\n        ...state,\n        allIds: action.value.map((x) => x.id),\n        cases: action.value,\n      };\n\n    case `${namespace}_FETCHED_TIMESTAMP_deaths`:\n      return {\n        ...state,\n        deathsTimestamp: action.value,\n      };\n\n    case `${namespace}_FETCHED_TIMESTAMP_confirmed`:\n      return {\n        ...state,\n        casesTimestamp: action.value,\n      };\n\n    case `${namespace}_TOGGLE_ID_FILTER`:\n      return {\n        ...state,\n        filters: {\n          ...state.filters,\n          [action.id]: !state.filters[action.id],\n        },\n      };\n\n    case `${namespace}_FORM_CONTROL_TOGGLE`:\n      return {\n        ...state,\n        chartState: {\n          ...state.chartState,\n          [action.value.chartId]: {\n            ...state.chartState[action.value.chartId],\n            ...action.value.update,\n          },\n        },\n      };\n\n    case `${namespace}_DATA_LOADED`:\n      return {\n        ...state,\n        loading: false,\n      };\n\n    default: return state;\n  }\n};\n\nexport const globalReducer = makeReducer(GLOBAL, makeInitialState(GlobalDataSpec));\nexport const usReducer = makeReducer(US, makeInitialState(USDataSpec));\n","import { applyMiddleware, createStore, combineReducers } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport logger from 'redux-logger';\n\nimport { globalReducer, usReducer } from './reducers/reducer';\nimport { GLOBAL, US } from './actions/const';\n\nconst reducer = combineReducers({\n  [GLOBAL]: globalReducer,\n  [US]: usReducer,\n});\n\nexport default createStore(\n  reducer,\n  applyMiddleware(\n    thunkMiddleware,\n    logger,\n  ),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\n\nimport List from '@material-ui/core/List';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\n// import ListItemText from '@material-ui/core/ListItemText';\n// import ListSubheader from '@material-ui/core/ListSubheader';\n\nconst propTypes = {\n  spec: PropTypes.arrayOf(\n    PropTypes.shape({\n      group: PropTypes.string.isRequired,\n      pages: PropTypes.arrayOf(\n        PropTypes.shape({\n          id: PropTypes.string.isRequired,\n          label: PropTypes.string.isRequired,\n        }),\n      ).isRequired,\n    }),\n  ).isRequired,\n  base: PropTypes.string.isRequired,\n};\n\n// <List component=\"nav\" dense\n//    subheader={<ListSubheader disableSticky component=\"div\">Deaths</ListSubheader>}>\n//   <ListItem button><ListItemText primary=\"Cumulative\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Daily\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Rate of Change\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Per Capita\" /></ListItem>\n// </List>\n// <List component=\"nav\" dense\n//    subheader={<ListSubheader disableSticky component=\"div\">Cases</ListSubheader>}>\n//   <ListItem button><ListItemText primary=\"Cumulative\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Daily\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Rate of Change\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Per Capita\" /></ListItem>\n// </List>\n// <List component=\"nav\" dense\n//    subheader={<ListSubheader disableSticky component=\"div\">Other</ListSubheader>}>\n//   <ListItem button><ListItemText primary=\"Mortality rate\" /></ListItem>\n//   <ListItem button><ListItemText primary=\"Full table\" /></ListItem>\n// </List>\n\nconst RightNav = ({ spec, base }) => (\n  <div id=\"right-nav\">\n    {spec.map(({ group, pages }) => (\n      <List\n        key={group}\n        component=\"nav\"\n      >\n        <Typography variant=\"body1\" gutterBottom style={{ paddingLeft: '12px' }}>{group}</Typography>\n        {pages.map(({ id, label }) => (\n          <li className=\"right-nav-item\" key={id}>\n            <Link\n              color=\"textSecondary\"\n              underline=\"none\"\n              variant=\"body1\"\n              component={NavLink}\n              to={`${base}/${id}`}\n              activeClassName=\"active\"\n            >\n              {label}\n            </Link>\n          </li>\n        ))}\n      </List>\n    ))}\n  </div>\n);\n\nRightNav.propTypes = propTypes;\n\nexport default RightNav;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Link from '@material-ui/core/Link';\n\nimport RightNav from '../components/RightNav';\n\nconst About = () => (\n  <div id=\"main-container\">\n    <Container maxWidth=\"sm\" id=\"main-content\">\n      <Typography variant=\"h4\" gutterBottom>\n        About This Project\n      </Typography>\n      <Typography variant=\"body2\" gutterBottom>\n        As the coronavirus spreads across the world,\n        it can be hard to keep up with the day to day impact,\n        as well as the variance of impact around the world.\n        The goal of this project is to provide detailed but easy\n        to understand visualizations to help people follow this pandemic.\n      </Typography>\n      <Typography variant=\"body2\" gutterBottom>\n        Most charts provided offer multiple views. You can toggle log scale\n        or visualize growth normalized by days since 50 cases in a specific region.\n        There are also different cuts, such as cumulative growth or rate of change.\n      </Typography>\n      <Typography variant=\"body2\">\n        Not sure where to start? Try one of these:\n      </Typography>\n      <ul>\n        <li>\n          <Link\n            variant=\"body2\"\n            component={NavLink}\n            to=\"global/deaths-cumulative\"\n          >\n            Cumulative Global Deaths\n          </Link>\n        </li>\n        <li>\n          <Link\n            variant=\"body2\"\n            component={NavLink}\n            to=\"united-states/cases-cumulative\"\n          >\n            Cumulative US Cases\n          </Link>\n        </li>\n      </ul>\n      <Typography variant=\"h5\" gutterBottom>Data</Typography>\n      <Typography variant=\"body2\" gutterBottom>\n        All data provided by Center for Systems Science and Engineering at Johns Hopkins University\n        (\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/CSSEGISandData/COVID-19\">source</a>\n        ).\n      </Typography>\n      <Typography variant=\"body2\" gutterBottom>\n        The underlying datasets from Johns Hopkins University are updated roughly every 12 hours,\n        and all visualizations will show when the data was last updated.\n      </Typography>\n      <Typography variant=\"h5\" gutterBottom>Questions or Feedback?</Typography>\n      <Typography variant=\"body2\" gutterBottom>\n        Tweet me at\n        {' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://twitter.com/TyGuyO\">@tyguyo</a>\n        {', '}\n        or open an issue on\n        {' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/TGOlson/covid-viz\">GitHub</a>\n        .\n      </Typography>\n    </Container>\n    <RightNav base=\"/\" spec={[]} />\n  </div>\n);\n\nexport default About;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\n\nconst TopNavBar = () => (\n  <AppBar position=\"fixed\" color=\"default\" id=\"top-nav\">\n    <Toolbar>\n      <div style={{\n        display: 'flex',\n        flex: 'auto',\n        flexDirection: 'row-reverse',\n      }}\n      >\n        <Button color=\"inherit\" component={NavLink} activeClassName=\"active\" to=\"/united-states\">United States</Button>\n        <Button color=\"inherit\" component={NavLink} activeClassName=\"active\" to=\"/global\">Global</Button>\n        <Button color=\"inherit\" component={NavLink} activeClassName=\"active\" to=\"/\">About</Button>\n      </div>\n    </Toolbar>\n  </AppBar>\n);\n// <Button color=\"inherit\" component={Link} to=\"/experiments\">Experiments</Button>\n\nexport default TopNavBar;\n","import React from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\n\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\n\nconst link = (url, text) => (\n  <Link\n    href={url}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    color=\"textSecondary\"\n    variant=\"body2\"\n    style={{ fontSize: '12px' }}\n  >\n    {text}\n  </Link>\n);\n\nconst NavHeader = () => (\n  <div style={{ display: 'flex' }}>\n    <div style={{\n      height: '58px',\n      paddingLeft: '16px',\n      paddingTop: '6px',\n    }}\n    >\n      <Link component={RouterLink} to=\"/\" color=\"textSecondary\" variant=\"h6\" style={{ marginTop: '6px' }}>Covid Dashboard</Link>\n      <div>\n        {link('https://twitter.com/TyGuyO', '@tyguyo')}\n        <Typography component=\"span\" color=\"textSecondary\" variant=\"body2\" style={{ fontSize: '12px' }}> / </Typography>\n        {link('https://github.com/TGOlson/covid-viz', 'GitHub')}\n      </div>\n    </div>\n  </div>\n);\n\nexport default NavHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport CheckIcon from '@material-ui/icons/Check';\n\n\nconst propTypes = {\n  // allCountries: PropTypes.arrayOf(PropTypes.string),\n  filteredIds: PropTypes.objectOf(PropTypes.bool).isRequired,\n  idGroupings: PropTypes.array.isRequired,\n  onFilterToggle: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n  allCountries: null,\n};\n\nconst IdSelector = (props) => {\n  const { filteredIds, idGroupings, onFilterToggle } = props;\n\n  const subheader = (label) => <ListSubheader disableSticky component=\"div\">{label}</ListSubheader>;\n\n  const icon = <ListItemIcon><CheckIcon color=\"primary\" fontSize=\"small\" /></ListItemIcon>;\n\n  const item = (id) => (\n    <ListItem key={id} button onClick={() => onFilterToggle(id)}>\n      <ListItemText key={id} primary={id} style={{ marginLeft: '24px' }} />\n      {filteredIds[id] ? icon : null}\n    </ListItem>\n  );\n\n  return idGroupings.map(({ label, ids }) => (\n    <List component=\"nav\" key={label} dense subheader={subheader(label)}>\n      {ids.map(item)}\n    </List>\n  ));\n};\n\nIdSelector.propTypes = propTypes;\nIdSelector.defaultProps = defaultProps;\n\nexport default IdSelector;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\n\nimport Drawer from '@material-ui/core/Drawer';\nimport Divider from '@material-ui/core/Divider';\n\nimport TopNavBar from '../components/TopNavBar';\nimport NavHeader from '../components/NavHeader';\nimport IdSelector from '../components/IdSelector';\nimport { GLOBAL, US } from '../actions/const';\n\nconst propTypes = {\n  // allCountries: PropTypes.arrayOf(PropTypes.string),\n  // filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  store: PropTypes.any.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string,\n  }).isRequired,\n};\n\nconst defaultProps = {\n  // allCountries: null,\n};\n\n// TODO: should pass some state around!\n// Think this would include hooking react-router into the store\nconst getNamespace = (path) => {\n  switch (path.split('/')[1]) {\n    case 'global': return GLOBAL;\n    case 'united-states': return US;\n    default: return null; // Expected for non-data pages\n  }\n};\n\nconst getReducer = (namespace, store) => {\n  switch (namespace) {\n    case GLOBAL: return store.global;\n    case US: return store.US; // TODO;\n    default: throw new Error(`Unexpected match fail 'getReducer': ${namespace}`);\n  }\n};\n\nconst Nav = (props) => {\n  const { store, dispatch, location } = props;\n\n  // TODO: this is a pretty sketchy way to inspect store state\n  const namespace = getNamespace(location.pathname);\n  const reducer = namespace && getReducer(namespace, store);\n  const { filters, idGroupings } = reducer || {}; // allIds available as well\n\n  const onFilterToggle = (id) => dispatch({\n    type: `${namespace}_TOGGLE_ID_FILTER`,\n    id,\n  });\n\n  const selector = reducer\n    ? (\n      <IdSelector\n        filteredIds={filters}\n        idGroupings={idGroupings}\n        onFilterToggle={onFilterToggle}\n      />\n    )\n    : null;\n\n  return (\n    <div>\n      <TopNavBar />\n      <nav id=\"left-nav\">\n        <Drawer\n          variant=\"permanent\"\n          open\n          PaperProps={{ style: { width: '240px' } }}\n        >\n          <NavHeader />\n          <Divider style={{ marginRight: '24px' }} />\n          {selector}\n        </Drawer>\n      </nav>\n    </div>\n  );\n};\n\nNav.propTypes = propTypes;\nNav.defaultProps = defaultProps;\n\nconst mapStateToProps = (store) => ({ store });\n\nexport default withRouter(connect(mapStateToProps)(Nav));\n","import PropTypes from 'prop-types';\n\nexport const ChartData = PropTypes.arrayOf(\n  PropTypes.shape({\n    x: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    y: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n);\n\nexport const Reducer = PropTypes.shape({\n  cases: ChartData,\n  deaths: ChartData,\n  filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  chartState: PropTypes.objectOf(\n    PropTypes.shape({\n      logScale: PropTypes.bool,\n      normalizeDays: PropTypes.bool,\n    }),\n  ).isRequired,\n});\n\nexport const ChartSpec = PropTypes.shape({\n  title: PropTypes.string,\n  group: PropTypes.string,\n  label: PropTypes.string,\n  getData: PropTypes.func,\n  getUpdatedAt: PropTypes.func,\n  logScale: PropTypes.bool,\n  normalizeDays: PropTypes.number,\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { ResponsiveLine } from '@nivo/line';\n\nimport deepEqual from 'deep-equal';\n\nimport { ChartData } from '../propTypes';\n\nconst propTypes = {\n  data: ChartData.isRequired,\n  logScale: PropTypes.bool,\n  normalizeDays: PropTypes.number,\n  group: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  logScale: false,\n  normalizeDays: null,\n};\n\nconst mapNormalizeDays = (cutoff, values) => values.map((item) => {\n  const data = item.data\n    .filter(({ y }) => y >= cutoff)\n    .map(({ y }, index) => ({ x: index, y }));\n\n  return { ...item, data };\n});\n\nconst filterZeroValues = ({ id, data }) => ({\n  id,\n  data: data.filter(({ y }) => y !== 0),\n});\n\nclass LineChart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chart: null,\n    };\n  }\n\n  // A little trickery in these lifecycle methods in order to render the chart\n  // outside of the current render cycle.\n  // Chart is slow and heavy to re-render,\n  // so we want to avoid batching with other updates that should be fast\n  componentDidMount() {\n    this.renderChart();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const propChange = !deepEqual(prevProps, this.props);\n\n    // This is a little sketchy... we need to see if state changed but comparing the\n    // chart would lead to an infinite loop\n    // (because state changes lead to chart changes lead to state changes)\n    // So as a quick fix just remove the chart value for comparison\n    const stateChange = !deepEqual({ ...prevState, chart: null }, { ...this.state, chart: null });\n\n    if (propChange || stateChange) {\n      this.renderChart();\n    }\n  }\n\n  renderChart() {\n    const {\n      data: initialData, logScale, normalizeDays, group,\n    } = this.props;\n\n    let data = initialData;\n    if (normalizeDays) {\n      data = mapNormalizeDays(normalizeDays, data);\n    }\n\n    if (logScale) {\n      // filter zero values\n      data = data.map(filterZeroValues);\n    }\n\n    const xScale = {\n      type: 'linear',\n      min: normalizeDays ? 0 : 'auto',\n      max: 'auto',\n    };\n\n    const yScale = logScale\n      ? { type: 'log', base: 10, max: 1000000 } // todo find max automatically\n      : { type: 'linear', min: 0, max: 'auto' };\n\n    const xFormat = normalizeDays\n      ? undefined\n      : (x) => new Date(x).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n\n    const gridYValues = logScale\n      ? [10, 100, 1000, 10000, 100000, 1000000, 10000000]\n      : undefined;\n\n    const axisLeftTickValues = logScale\n      ? [10, 100, 1000, 10000, 100000, 1000000, 10000000]\n      : undefined;\n\n    const bottomLegend = normalizeDays\n      // super hacky formatting but what can you do\n      ? `Number of days since ${normalizeDays}th ${group.toLowerCase().slice(0, group.length - 1)}`\n      : 'Date';\n\n    const axisBottom = {\n      orient: 'bottom',\n      tickSize: 5,\n      tickPadding: 5,\n      tickRotation: normalizeDays ? 0 : -40,\n      tickValues: 10,\n      format: xFormat,\n      legend: bottomLegend,\n      legendOffset: 50,\n      legendPosition: 'middle',\n    };\n\n    const axisLeft = {\n      orient: 'left',\n      tickValues: axisLeftTickValues,\n      tickSize: 5,\n      tickPadding: 5,\n      tickRotation: 0,\n      legend: 'Count',\n      legendOffset: -65,\n      legendPosition: 'middle',\n    };\n\n    const smallScreen = false;\n\n    const legend = {\n      anchor: smallScreen ? 'top-left' : 'top-right',\n      direction: smallScreen ? 'row' : 'column',\n      justify: false,\n      translateX: smallScreen ? -45 : 100,\n      translateY: smallScreen ? -35 : 0,\n      itemsSpacing: 0,\n      itemDirection: 'left-to-right',\n      itemWidth: 80,\n      itemHeight: 20,\n      itemOpacity: 0.75,\n      symbolSize: 12,\n      symbolShape: 'circle',\n      symbolBorderColor: 'rgba(0, 0, 0, .5)',\n    };\n\n    const chart = (\n      <ResponsiveLine\n        data={data}\n        margin={{\n          top: 50, right: smallScreen ? 30 : 110, bottom: 65, left: 80,\n        }}\n        xScale={xScale}\n        yScale={yScale}\n        xFormat={xFormat}\n        axisBottom={axisBottom}\n        gridYValues={gridYValues}\n        axisLeft={axisLeft}\n        isInteractive\n        // pointSize={4}\n        useMesh\n        enableGridX={false}\n        enableCrosshair={false}\n        // tooltip={({ point }) => {\n        //   console.log(point);\n        //   // id: \"New York.72\"\n        //   // index: 318\n        //   // serieId: \"New York\"\n        //   // serieColor: \"#e8a838\"\n        //   // x: 418\n        //   // y: 238\n        //   // color: \"#e8a838\"\n        //   // borderColor: \"transparent\"\n        //   return <p>foo</p>;\n        // }}\n        legends={[legend]}\n      />\n    );\n\n    // Render chart into DOM outside of current render cycle\n    setTimeout(() => this.setState({ chart }), 0);\n  }\n\n  render() {\n    const { chart } = this.state;\n\n    return chart;\n  }\n}\n\nLineChart.propTypes = propTypes;\nLineChart.defaultProps = defaultProps;\n\nexport default LineChart;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\nimport BaseLineChart from './BaseLineChart';\n\nimport { ChartData } from '../propTypes';\n\nconst propTypes = {\n  title: PropTypes.string.isRequired,\n  data: ChartData.isRequired,\n  updatedAt: PropTypes.string,\n  logScaleToggle: PropTypes.bool,\n  normalizeDaysToggle: PropTypes.oneOfType([PropTypes.number, PropTypes.bool]),\n  logScale: PropTypes.bool.isRequired,\n  normalizeDays: PropTypes.bool.isRequired,\n  onControlToggle: PropTypes.func.isRequired,\n  group: PropTypes.string.isRequired,\n};\n\nconst defaultProps = {\n  updatedAt: null,\n  logScaleToggle: false,\n  normalizeDaysToggle: false,\n};\n\nconst FormattedLineChart = (props) => {\n  const {\n    title,\n    data,\n    updatedAt,\n    logScaleToggle,\n    normalizeDaysToggle,\n    logScale,\n    normalizeDays,\n    onControlToggle,\n    group,\n  } = props;\n\n  const date = new Date(updatedAt);\n\n  const timePart = date.toLocaleTimeString([], { hour12: true, hour: '2-digit', minute: '2-digit' });\n  const datePart = date.toLocaleDateString([], { year: 'numeric', month: 'long', day: 'numeric' });\n\n  const updatedAtString = updatedAt\n    ? `Data as of ${timePart} on ${datePart}.`\n    : 'Data normally updated every 12 hours.';\n\n  return (\n    <div>\n      <Typography variant=\"h4\" style={{ marginBottom: '12px' }}>{title}</Typography>\n      <Typography\n        variant=\"caption\"\n        display=\"block\"\n        gutterBottom\n        style={{ fontStyle: 'italic', marginBottom: '12px', marginTop: '12px' }}\n      >\n        {updatedAtString}\n      </Typography>\n      <FormGroup id=\"chart-toggles\" row style={{ flexDirection: 'row-reverse', marginBottom: '6px' }}>\n        <FormControlLabel\n          control={<Switch size=\"small\" checked={logScale} onChange={() => onControlToggle('logScale')} />}\n          label=\"Log Scale\"\n          disabled={!logScaleToggle}\n        />\n        <FormControlLabel\n          control={<Switch size=\"small\" checked={normalizeDays} onChange={() => onControlToggle('normalizeDays')} />}\n          label=\"Normalize Days\"\n          disabled={!normalizeDaysToggle}\n        />\n      </FormGroup>\n      <Paper\n        variant=\"outlined\"\n        style={{\n          marginTop: '12px',\n          marginBottom: '6px',\n          margin: 'auto',\n          padding: '0 0 0 0',\n        }}\n      >\n        <Container style={{ height: '500px', maxWidth: '800px' }} disableGutters>\n          <BaseLineChart\n            data={data}\n            logScale={logScale}\n            normalizeDays={normalizeDays ? normalizeDaysToggle : undefined}\n            group={group}\n          />\n        </Container>\n      </Paper>\n      <Typography\n        variant=\"caption\"\n        display=\"block\"\n        gutterBottom\n        style={{\n          textAlign: 'center', fontStyle: 'italic', marginBottom: '12px', marginTop: '12px',\n        }}\n      >\n        Source:\n        {' '}\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/CSSEGISandData/COVID-19\">Center for Systems Science and Engineering at Johns Hopkins University</a>\n        .\n      </Typography>\n    </div>\n  );\n};\n\nFormattedLineChart.propTypes = propTypes;\nFormattedLineChart.defaultProps = defaultProps;\n\nexport default FormattedLineChart;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport Container from '@material-ui/core/Container';\n\nimport RightNav from '../components/RightNav';\nimport FormattedLineChart from '../components/FormattedLineChart';\n\nimport { Reducer } from '../propTypes';\nimport { GLOBAL, US } from '../actions/const';\nimport * as globalSpec from '../data-specs/global';\nimport * as usSpec from '../data-specs/united-states';\nimport { toNavSpec } from '../data-specs/utils';\n\nconst propTypes = {\n  store: PropTypes.shape({\n    global: Reducer.isRequired,\n    US: Reducer.isRequired,\n  }).isRequired,\n  match: PropTypes.shape({\n    path: PropTypes.string,\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string,\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nconst getNamespace = (path) => {\n  switch (path) {\n    case '/global': return GLOBAL;\n    case '/united-states': return US;\n    default: throw new Error(`Unexpected match fail 'getNamespace': ${path}`);\n  }\n};\n\nconst getSpec = (namespace) => {\n  switch (namespace) {\n    case GLOBAL: return globalSpec;\n    case US: return usSpec; // TODO;\n    default: throw new Error(`Unexpected match fail 'getSpec': ${namespace}`);\n  }\n};\n\nconst getReducer = (namespace, store) => {\n  switch (namespace) {\n    case GLOBAL: return store.global;\n    case US: return store.US; // TODO;\n    default: throw new Error(`Unexpected match fail 'getReducer': ${namespace}`);\n  }\n};\n\nconst VizPage = (props) => {\n  const {\n    store,\n    match,\n    location,\n    dispatch,\n  } = props;\n\n  const namespace = getNamespace(match.path);\n  const { spec, defaultChartId } = getSpec(namespace);\n  const reducer = getReducer(namespace, store);\n  const basePath = match.path;\n\n  const render = (content) => (\n    <div id=\"main-container\">\n      <Container maxWidth=\"md\" id=\"main-content\">\n        {content}\n      </Container>\n      <RightNav base={basePath} spec={toNavSpec(spec)} />\n    </div>\n  );\n\n  const chartId = location.pathname.split('/')[2];\n  const chartSpec = spec[chartId];\n\n  // redirect to default if no matches\n  if (!chartId || !chartSpec) {\n    return <Redirect to={`${basePath}/${defaultChartId}`} />;\n  }\n\n  if (reducer.loading) {\n    return render(<p>Loading...</p>);\n  }\n\n  const chartState = reducer.chartState[chartId];\n\n  const data = chartSpec.getData(reducer);\n  const updatedAt = chartSpec.getUpdatedAt(reducer);\n\n  const onControlToggle = (key) => dispatch({\n    type: `${namespace}_FORM_CONTROL_TOGGLE`,\n    value: { chartId, update: { [key]: !chartState[key] } },\n  });\n\n  return render(\n    <FormattedLineChart\n      // from spec\n      title={chartSpec.title}\n      data={data}\n      updatedAt={updatedAt}\n      logScaleToggle={chartSpec.logScale}\n      normalizeDaysToggle={chartSpec.normalizeDays}\n      chartState={chartState}\n      group={chartSpec.group}\n\n        // from state\n      logScale={chartState.logScale}\n      normalizeDays={chartState.normalizeDays}\n\n      // other\n      onControlToggle={onControlToggle}\n    />,\n  );\n};\n\nVizPage.propTypes = propTypes;\n\nconst mapStateToProps = (store) => ({ store });\n\nexport default connect(mapStateToProps)(VizPage);\n","import React from 'react';\nimport {\n  HashRouter, Route, Switch, Redirect,\n} from 'react-router-dom';\n\nimport About from './pages/About';\nimport Nav from './pages/Nav';\nimport VizPage from './pages/VizPage';\n\nfunction App() {\n  return (\n    <HashRouter basename=\"/\">\n      <div style={{ display: 'flex' }}>\n        <Nav />\n        <Switch>\n          <Route exact path=\"/\" component={About} />\n          <Route path=\"/global\" component={VizPage} />\n          <Route path=\"/united-states\" component={VizPage} />\n          <Route render={() => <Redirect to=\"/\" />} />\n        </Switch>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","export const globalConfig = {\n  columnMap: {\n    // drop\n    'Province/State': null,\n    Lat: null,\n    Long: null,\n\n    // map column map\n    'Country/Region': 'id',\n  },\n  idMap: {\n    'Korea, South': 'South Korea',\n    'Taiwan*': 'Taiwan',\n    'United Kingdom': 'UK',\n  },\n};\n\nexport const usConfig = {\n  columnMap: {\n    UID: null,\n    iso2: null,\n    iso3: null,\n    code3: null,\n    FIPS: null,\n    Admin2: null,\n    Province_State: 'id',\n    Country_Region: null,\n    Lat: null,\n    Long_: null,\n    Combined_Key: null,\n    Population: 'population',\n  },\n  idMap: {},\n};\n\nconst isDateString = (s) => !isNaN(s); // eslint-disable-line no-restricted-globals\n\nexport const csvOptions = ({ columnMap, idMap }) => ({\n  mapHeaders: ({ header, index }) => { // eslint-disable-line no-unused-vars\n    if (Object.prototype.hasOwnProperty.call(columnMap, header)) {\n      return columnMap[header];\n    }\n\n    // m/d/y where month and day can be one or two digits\n    if (/\\d{1,2}\\/\\d{1,2}\\/\\d{2}/.test(header)) {\n      return new Date(header).getTime();\n    }\n\n    // Try to map all headers so we don't just pass through values\n    console.warn('Header not transformed:', header); // eslint-disable-line no-console\n\n    return header;\n  },\n  mapValues: ({ header, index, value }) => { // eslint-disable-line no-unused-vars\n    if (isDateString(header)) return parseInt(value, 10);\n\n    if (header === 'id' && idMap[value]) {\n      return idMap[value];\n    }\n\n    return value;\n  },\n});\n","import parseCsv from 'neat-csv';\n\nimport {\n  GLOBAL, dataUrl, timestampUrl,\n} from './const';\n\nimport { csvOptions, globalConfig, usConfig } from './csv-options';\n\nconst isDateString = (s) => !isNaN(s); // eslint-disable-line no-restricted-globals\n\nconst combineRowsById = (accum, row) => {\n  const prevValue = accum[row.id] || {};\n\n  const dateKeys = Object.keys(row).filter(isDateString);\n\n  const nextValue = dateKeys.reduce((acc, key) => ({\n    ...acc,\n    [key]: row[key] + (prevValue[key] || 0),\n  }), { id: row.id });\n\n  return {\n    ...accum,\n    [row.id]: nextValue,\n  };\n};\n\nconst createDataArray = (row) => {\n  const dateKeys = Object.keys(row).filter(isDateString);\n\n  const data = dateKeys.map((key) => ({\n    x: key,\n    y: row[key],\n  }), []);\n\n  return { id: row.id, data };\n};\n\nconst fetchData = (location, dataset) => fetch(dataUrl(location, dataset))\n  .then((res) => res.text())\n  .then((x) => {\n    const config = location === GLOBAL ? globalConfig : usConfig;\n    const options = csvOptions(config);\n\n    return parseCsv(x, options);\n  })\n  .then((csv) => Object.values(csv.reduce(combineRowsById, {}))\n    .map(createDataArray));\n\nconst fetchTimestamp = (location, dataset) => fetch(timestampUrl(location, dataset))\n  .then((res) => res.json())\n  .then((data) => (data[0] ? data[0].commit.committer.date : null))\n  .catch((err) => {\n    console.error('Error fetching timestamps', err); // eslint-disable-line no-console\n    return null;\n  });\n\nexport default (namespace, dataset) => (dispatch) => Promise.all([\n  fetchData(namespace, dataset).then((rows) => dispatch({\n    type: `${namespace}_FETCHED_DATASET_${dataset}`,\n    value: rows,\n  })),\n  fetchTimestamp(namespace, dataset).then((timestamp) => dispatch({\n    type: `${namespace}_FETCHED_TIMESTAMP_${dataset}`,\n    value: timestamp,\n  })),\n]);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport store from './store';\nimport App from './App';\n\nimport './index.css';\n\nimport { fetchGlobalData, fetchUSData } from './actions';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n\nstore.dispatch(fetchGlobalData());\nstore.dispatch(fetchUSData());\n","import {\n  GLOBAL, US, DEATHS, CASES,\n} from './const';\n\nimport fetchDataset from './fetch-dataset';\n\nexport const fetchGlobalData = () => (dispatch) => Promise.all([\n  fetchDataset(GLOBAL, DEATHS)(dispatch),\n  fetchDataset(GLOBAL, CASES)(dispatch),\n]).then(() => dispatch({\n  type: `${GLOBAL}_DATA_LOADED`,\n}));\n\nexport const fetchUSData = () => (dispatch) => Promise.all([\n  fetchDataset(US, DEATHS)(dispatch),\n  fetchDataset(US, CASES)(dispatch),\n]).then(() => dispatch({\n  type: `${US}_DATA_LOADED`,\n}));\n"],"sourceRoot":""}