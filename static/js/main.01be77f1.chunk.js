(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{326:function(e,t,a){e.exports=a(535)},486:function(e,t){},494:function(e,t,a){},498:function(e,t){},500:function(e,t){},533:function(e,t){},535:function(e,t,a){"use strict";a.r(t);var n,r=a(1),i=a.n(r),o=a(18),c=a.n(o),l=a(55),u=a(79),s=a(271),d=a(272),m=a.n(d),p=a(26),f=a(16),g=function(e){return function(t){var a=e(t),n=function(e){return e.filters}(t);return a.filter((function(e){var t=e.id;return n[t]}))}},h=g((function(e){return e.deaths})),b=g((function(e){return e.cases})),v=function(e){return e.deathsTimestamp},y=function(e){return e.casesTimestamp},O=function(e){var t=e.id,a=e.data;return{id:t,data:a.map((function(e,t){var n=e.x,r=e.y,i=a[t-1];return{x:n,y:0===t||0===i.y?0:(r-i.y)/i.y}}))}},E=function(e){return function(t){return{id:t.id,data:t.data.filter((function(t){return t.x>=new Date(e).getTime()}))}}},S={"deaths-cumulative":{title:"Cumulative Global Deaths",group:"Deaths",label:"Cumulative",getData:h,getUpdatedAt:v,logScale:!0,normalizeDays:10},"deaths-change-rate":{title:" Global Deaths Daily Rate of Change",group:"Deaths",label:"Rate of Change",getData:function(e){return h(e).map(O).map(E("3/5/2020"))},getUpdatedAt:v},"cases-cumulative":{title:"Cumulative Global Cases",group:"Cases",label:"Cumulative",getData:b,getUpdatedAt:y,logScale:!0,normalizeDays:50},"cases-change-rate":{title:" Global Cases Daily Rate of Change",group:"Cases",label:"Rate of Change",getData:function(e){return b(e).map(O).map(E("3/5/2020"))},getUpdatedAt:y},"mortality-rate":{title:"Mortality Rate",group:"Other",label:"Mortality Rate",getData:function(e){return h(e).map((function(t){var a=t.id,n=t.data,r=b(e).find((function(e){return e.id===a})).data,i=n.map((function(e,t){var a=e.x,n=e.y,i=r[t].y;return{x:a,y:0===i?0:n/i}}));return{id:a,data:i}})).map(E("3/5/2020"))},getUpdatedAt:v}},D=a(288),C=function(e){return Object.values(Object.keys(e).reduce((function(t,a){var n=e[a],r=n.group,i=n.label,o=t[r]?t[r].pages:[],c=[].concat(Object(D.a)(o),[{id:a,label:i}]);return Object(f.a)({},t,Object(p.a)({},r,{group:r,pages:c}))}),{}))},j={cases:null,casesTimestamp:null,deaths:null,deathsTimestamp:null,allCountries:null,filters:{Italy:!0,US:!0,UK:!0,Singapore:!0,France:!1,Spain:!1,Germany:!1,"S. Korea":!1},chartState:(n=S,Object.keys(n).reduce((function(e,t){return Object(f.a)({},e,Object(p.a)({},t,{logScale:!!n[t].logScale,normalizeDays:!1}))}),{})),loading:!0},T=Object(u.c)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHED_GLOBAL_CASES":return Object(f.a)({},e,{allCountries:t.values.map((function(e){return e.id})),cases:t.values});case"FETCHED_GLOBAL_DEATHS":return Object(f.a)({},e,{deaths:t.values});case"TOGGLE_COUNTRY_FILTER":return Object(f.a)({},e,{filters:Object(f.a)({},e.filters,Object(p.a)({},t.country,!e.filters[t.country]))});case"GLOBAL_FORM_CONTROL_TOGGLE":return Object(f.a)({},e,{chartState:Object(f.a)({},e.chartState,Object(p.a)({},t.value.chartId,Object(f.a)({},e.chartState[t.value.chartId],{},t.value.update)))});case"GLOBAL_DATA_LOADED":return Object(f.a)({},e,{loading:!1});case"GLOBAL_DEATHS_TIMESTAMP_LOADED":return Object(f.a)({},e,{deathsTimestamp:t.value});case"GLOBAL_CASES_TIMESTAMP_LOADED":return Object(f.a)({},e,{casesTimestamp:t.value});default:return e}}}),_=Object(u.d)(T,Object(u.a)(s.a,m.a)),x=a(58),A=a(59),L=function(){return i.a.createElement("p",null,"About")},k=a(602),G=a(559),I=a(87),B=a(603),z=a(604),R=a(614),U=a(29),w=a(24),P=a(134),F=a(136),M=a(273),H=a(190),N=a.n(H),K=a(0),V=a.n(K),J=V.a.arrayOf(V.a.shape({x:V.a.oneOfType([V.a.string,V.a.number]),y:V.a.oneOfType([V.a.string,V.a.number])})),Y=(V.a.shape({cases:J,deaths:J,filters:V.a.objectOf(V.a.bool).isRequired,chartState:V.a.objectOf(V.a.shape({logScale:V.a.bool,normalizeDays:V.a.bool})).isRequired}),function(e){return{id:e.id,data:e.data.filter((function(e){return 0!==e.y}))}}),W=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(U.a)(this,a),(n=t.call(this,e)).state={chart:null},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e,t){var a=!N()(e,this.props),n=!N()(Object(f.a)({},t,{chart:null}),Object(f.a)({},this.state,{chart:null}));(a||n)&&this.renderChart()}},{key:"renderChart",value:function(){var e,t=this,a=this.props,n=a.data,r=a.logScale,o=a.normalizeDays,c=n;o&&(e=o,c=c.map((function(t){var a=t.data.filter((function(t){return t.y>=e})).map((function(e,t){return{x:t,y:e.y}}));return Object(f.a)({},t,{data:a})}))),r&&(c=c.map(Y));var l={type:"linear",min:o?0:"auto",max:"auto"},u=r?{type:"log",base:10,max:1e6}:{type:"linear",min:0,max:"auto"},s=o?void 0:function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},d=r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,m={orient:"bottom",tickSize:5,tickPadding:5,tickValues:10,format:s,legend:"Number of days since Nth case",legendOffset:36,legendPosition:"middle"},p={orient:"left",tickValues:r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,tickSize:5,tickPadding:5,tickRotation:0,legend:"Count",legendOffset:-50,legendPosition:"middle"},g=i.a.createElement(M.a,{data:c,margin:{top:50,right:110,bottom:50,left:60},xScale:l,yScale:u,xFormat:s,axisBottom:m,gridYValues:d,axisLeft:p,isInteractive:!0,useMesh:!0,enableGridX:!1,enableSlices:"x",legends:[{anchor:"top-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]});setTimeout((function(){return t.setState({chart:g})}),0)}},{key:"render",value:function(){return this.state.chart}}]),a}(i.a.Component);W.defaultProps={logScale:!1,normalizeDays:null};var q=W,X=a(598),Q=a(601),Z=function(e){var t=e.spec,a=e.base;return i.a.createElement("div",{id:"right-nav"},t.map((function(e){var t=e.group,n=e.pages;return i.a.createElement(X.a,{key:t,component:"nav"},i.a.createElement(I.a,{variant:"body1",gutterBottom:!0,style:{paddingLeft:"12px"}},t),n.map((function(e){var t=e.id,n=e.label;return i.a.createElement("li",{className:"right-nav-item",key:t},i.a.createElement(Q.a,{color:"textSecondary",underline:"none",variant:"body1",component:x.c,to:"".concat(a,"/").concat(t),activeClassName:"active"},n))})))})))},$=function(e){return i.a.createElement("div",{id:"main-container"},i.a.createElement(k.a,{maxWidth:"md",id:"main-content"},e),i.a.createElement(Z,{base:"/global",spec:C(S)}))},ee=Object(l.b)((function(e){return{reducer:e.global}}))((function(e){var t=e.reducer,a=e.location,n=e.dispatch;if(t.loading)return $(i.a.createElement("p",null,"Loading..."));var r=a.pathname.split("/")[2]||"deaths-cumulative",o=S[r]||S["deaths-cumulative"],c=t.chartState[r],l=o.getData(t),u=o.getUpdatedAt(t),s=function(e){return n({type:"GLOBAL_FORM_CONTROL_TOGGLE",value:{chartId:r,update:Object(p.a)({},e,!c[e])}})},d=new Date(u),m=d.toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"}),f=d.toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"});return $(i.a.createElement("div",null,i.a.createElement(I.a,{variant:"h4",style:{marginBottom:"12px",textAlign:"center"}},o.title),i.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},"Data as of ".concat(m," on ").concat(f,".")),i.a.createElement(B.a,{id:"chart-toggles",row:!0,style:{flexDirection:"row-reverse",marginBottom:"6px"}},i.a.createElement(z.a,{control:i.a.createElement(R.a,{size:"small",checked:c.logScale,onChange:function(){return s("logScale")}}),label:"Log Scale",disabled:!o.logScale}),i.a.createElement(z.a,{control:i.a.createElement(R.a,{size:"small",checked:c.normalizeDays,onChange:function(){return s("normalizeDays")}}),label:"Normalize Days",disabled:!o.normalizeDays})),i.a.createElement(G.a,{variant:"outlined",style:{marginTop:"12px",marginBottom:"6px",margin:"auto",padding:"0 32px 18px"}},i.a.createElement(k.a,{style:{height:"500px",maxWidth:"800px"},disableGutters:!0},i.a.createElement(q,{data:l,logScale:c.logScale,normalizeDays:c.normalizeDays?o.normalizeDays:void 0}))),i.a.createElement(I.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},"Source:"," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CSSEGISandData/COVID-19"},"Center for Systems Science and Engineering at Johns Hopkins University"),".")))})),te=a(612),ae=a(608),ne=a(615),re=a(606),ie=a(607),oe=a(605),ce=a(286),le=a.n(ce),ue=[{region:"Americas",countries:["US","Canada","Mexico","Brazil"]},{region:"Europe",countries:["UK","Spain","France","Germany","Italy","Switzerland","Belgium","Netherlands"]},{region:"APAC",countries:["Singapore","Taiwan","Japan","S. Korea","Australia"]}],se=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(U.a)(this,a),(n=t.call(this,e)).onFilterToggle=function(e){var t=Object(f.a)({},n.state.filteredIds,Object(p.a)({},e,!n.state.filteredIds[e]));n.setState({filteredIds:t},(function(){return n.props.onFilterToggle(e)}))},n.state={filteredIds:e.filteredIds},n}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.state.filteredIds,a=function(e){return i.a.createElement(oe.a,{disableSticky:!0,component:"div"},e)},n=i.a.createElement(re.a,null,i.a.createElement(le.a,{color:"primary",fontSize:"small"})),r=function(a){return i.a.createElement(ne.a,{key:a,button:!0,onClick:function(){return e.onFilterToggle(a)}},i.a.createElement(ie.a,{key:a,primary:a,style:{marginLeft:"24px"}}),t[a]?n:null)};return ue.map((function(e){var t=e.region,n=e.countries;return i.a.createElement(X.a,{component:"nav",key:t,dense:!0,subheader:a(t)},n.map(r))}))}}]),a}(i.a.Component);se.defaultProps={allCountries:null};var de=se,me=function(e){var t=e.dispatch,a=e.filters;return i.a.createElement("nav",{id:"left-nav"},i.a.createElement(te.a,{variant:"permanent",open:!0,PaperProps:{style:{width:"240px"}}},i.a.createElement(ae.a,{style:{marginTop:"64px",marginRight:"24px"}}),i.a.createElement(de,{filteredIds:a,onFilterToggle:function(e){return t({type:"TOGGLE_COUNTRY_FILTER",country:e})}})))};me.defaultProps={};var pe=Object(l.b)((function(e){var t=e.global;return{allCountries:t.allCountries,filters:t.filters}}))(me);function fe(e){return i.a.createElement("p",null,"US overview here")}fe.defaultProps={cases:null,deaths:null};var ge=Object(l.b)((function(e){var t=e.global;return{cases:t.cases,deaths:t.deaths,countries:t.filteredCountries}}))(fe),he=a(609),be=a(610),ve=a(611),ye=function(){return i.a.createElement(he.a,{position:"fixed",color:"default",id:"top-nav"},i.a.createElement(be.a,null,i.a.createElement(I.a,{variant:"h6",style:{flex:"auto"}},"Covid Dashboard"),i.a.createElement("div",null,i.a.createElement(ve.a,{color:"inherit",component:x.b,to:"/"},"About"),i.a.createElement(ve.a,{color:"inherit",component:x.b,to:"/global"},"Global"),i.a.createElement(ve.a,{color:"inherit",component:x.b,to:"/united-states"},"United States"))))};var Oe=function(){return i.a.createElement(x.a,{basename:"/"},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(ye,null),i.a.createElement(pe,null),i.a.createElement(A.a,{exact:!0,path:"/",component:L}),i.a.createElement(A.a,{path:"/global",component:ee}),i.a.createElement(A.a,{path:"/united-states",component:ge})))},Ee=(a(494),a(287)),Se=a.n(Ee),De="csse_covid_19_data/csse_covid_19_time_series",Ce="".concat(De,"/time_series_covid19_deaths_global.csv"),je="".concat(De,"/time_series_covid19_confirmed_global.csv"),Te="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master",_e="".concat(Te,"/").concat(Ce),xe="".concat(Te,"/").concat(je),Ae="https://api.github.com/repos/CSSEGISandData/COVID-19/commits",Le=function(e){return e.replace(/\//g,"%2F")},ke="page=1&per_page=1&ref=master",Ge="".concat(Ae,"?path=").concat(Le(Ce),"&").concat(ke),Ie="".concat(Ae,"?path=").concat(Le(je),"&").concat(ke),Be={"Province/State":!0,Lat:!0,Long:!0},ze={"Country/Region":"id"},Re=function(e){return!isNaN(e)},Ue={mapHeaders:function(e){var t=e.header;e.index;return Be[t]?null:ze[t]?ze[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);if(Re(t))return parseInt(a,10);if("id"===t)switch(a){case"Korea, South":return"S. Korea";case"Taiwan*":return"Taiwan";case"United Kingdom":return"UK";default:return a}return a}},we=function(e,t){var a=e[t.id]||{},n=Object.keys(t).filter(Re).reduce((function(e,n){return Object(f.a)({},e,Object(p.a)({},n,t[n]+(a[n]||0)))}),{id:t.id});return Object(f.a)({},e,Object(p.a)({},t.id,n))},Pe=function(e){var t=Object.keys(e).filter(Re).map((function(t){return{x:t,y:e[t]}}),[]);return{id:e.id,data:t}},Fe=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return Se()(e,Ue)})).then((function(e){return Object.values(e.reduce(we,{})).map(Pe)}))},Me=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e[0]?e[0].commit.committer.date:null}))};c.a.render(i.a.createElement(l.a,{store:_},i.a.createElement(Oe,null)),document.getElementById("root")),Promise.all([_.dispatch((function(e){return Fe(xe).then((function(t){return e({type:"FETCHED_GLOBAL_CASES",values:t})}))})),_.dispatch((function(e){return Fe(_e).then((function(t){return e({type:"FETCHED_GLOBAL_DEATHS",values:t})}))})),_.dispatch((function(e){return Me(Ge).then((function(t){return e({type:"GLOBAL_DEATHS_TIMESTAMP_LOADED",value:t})}))})),_.dispatch((function(e){return Me(Ie).then((function(t){return e({type:"GLOBAL_CASES_TIMESTAMP_LOADED",value:t})}))}))]).then((function(){return _.dispatch({type:"GLOBAL_DATA_LOADED"})}))}},[[326,1,2]]]);
//# sourceMappingURL=main.01be77f1.chunk.js.map