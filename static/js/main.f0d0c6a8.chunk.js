(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{340:function(e,t,a){e.exports=a(551)},502:function(e,t){},508:function(e,t,a){},512:function(e,t){},514:function(e,t){},545:function(e,t){},551:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"filters",(function(){return x})),a.d(n,"idGroupings",(function(){return _})),a.d(n,"defaultChartId",(function(){return j})),a.d(n,"spec",(function(){return k}));var r={};a.r(r),a.d(r,"filters",(function(){return A})),a.d(r,"idGroupings",(function(){return I})),a.d(r,"defaultChartId",(function(){return U})),a.d(r,"spec",(function(){return z}));var o=a(1),i=a.n(o),c=a(19),l=a.n(c),u=a(84),s=a(107),d=a(281),m=a(282),p=a.n(m),f=a(22),h=a(14),g=function(e){return function(t){var a=e(t),n=function(e){return e.filters}(t);return a.filter((function(e){var t=e.id;return n[t]}))}},b=g((function(e){return e.deaths})),v=g((function(e){return e.cases})),y=function(e){return e.deathsTimestamp},E=function(e){return e.casesTimestamp},S=function(e){var t=e.id,a=e.data;return{id:t,data:a.map((function(e,t){var n=e.x,r=e.y,o=a[t-1];return{x:n,y:0===t||0===o.y?0:(r-o.y)/o.y}}))}},D=function(e){return function(t){return{id:t.id,data:t.data.filter((function(t){return t.x>=new Date(e).getTime()}))}}},O=function(e){return v(e).map(S).map(D("3/5/2020"))},T=function(e){return b(e).map(S).map(D("3/5/2020"))},C=function(e){return b(e).map((function(t){var a=t.id,n=t.data,r=v(e).find((function(e){return e.id===a})).data,o=n.map((function(e,t){var a=e.x,n=e.y,o=r[t].y;return{x:a,y:0===o?0:n/o}}));return{id:a,data:o}})).map(D("3/5/2020"))},w=function(e){return{"deaths-cumulative":{title:"Cumulative ".concat(e," Deaths"),group:"Deaths",label:"Cumulative",getData:b,getUpdatedAt:y,logScale:!0,normalizeDays:10},"deaths-change-rate":{title:"".concat(e," Deaths Daily Rate of Change"),group:"Deaths",label:"Rate of Change",getData:T,getUpdatedAt:y},"cases-cumulative":{title:"Cumulative ".concat(e," Cases"),group:"Cases",label:"Cumulative",getData:v,getUpdatedAt:E,logScale:!0,normalizeDays:50},"cases-change-rate":{title:"".concat(e," Cases Daily Rate of Change"),group:"Cases",label:"Rate of Change",getData:O,getUpdatedAt:E},"mortality-rate":{title:"".concat(e," Mortality Rate"),group:"Other",label:"Mortality Rate",getData:C,getUpdatedAt:y}}},x={Italy:!0,US:!0,UK:!0,Singapore:!0,France:!1,Spain:!1,Germany:!1,"S. Korea":!1},_=[{label:"Americas",ids:["US","Canada","Mexico","Brazil"]},{label:"Europe",ids:["UK","Spain","France","Germany","Italy","Switzerland","Belgium","Netherlands"]},{label:"APAC",ids:["Singapore","Taiwan","Japan","S. Korea","Australia"]}],j="deaths-cumulative",k=w("Global"),A={California:!0,Florida:!0,Minnesota:!0,"New York":!0,Washington:!0},I=[{label:"Northeast",ids:["Connecticut","Maine","Massachusetts","New Hampshire","New Jersey","New York","Pennsylvania","Rhode Island","Vermont"]},{label:"Midwest",ids:["Kansas","Iowa","Illinois","Indiana","Michigan","Minnesota","Missouri","Nebraska","North Dakota","Ohio","South Dakota","Wisconsin"]},{label:"South",ids:["Alabama","Arkansas","Delaware","District of Columbia","Florida","Georgia","Kentucky","Louisiana","Maryland","Mississippi","North Carolina","Oklahoma","South Carolina","Tennessee","Texas","Virginia","West Virginia"]},{label:"West",ids:["Alaska","Arizona","California","Colorado","Hawaii","Idaho","Montana","Nevada","New Mexico","Oregon","Utah","Washington","Wyoming"]},{label:"Other US Territories",ids:["American Samoa","Guam","Northern Mariana Islands","Puerto Rico","Virgin Islands"]}],U="deaths-cumulative",z=w("US"),G=a(143),N=function(e){return Object.values(Object.keys(e).reduce((function(t,a){var n=e[a],r=n.group,o=n.label,i=t[r]?t[r].pages:[],c=[].concat(Object(G.a)(i),[{id:a,label:o}]);return Object(h.a)({},t,Object(f.a)({},r,{group:r,pages:c}))}),{}))},M=function(e){return Object.keys(e).reduce((function(e,t){return Object(h.a)({},e,Object(f.a)({},t,{logScale:!1,normalizeDays:!1}))}),{})},P=function(e){var t=e.filters,a=e.spec;return{cases:null,casesTimestamp:null,deaths:null,deathsTimestamp:null,allIds:null,filters:t,idGroupings:e.idGroupings,chartState:M(a),loading:!0}},L={global:P(n),US:P(r)},B=function(e,t){switch(t.type){case"FETCHED_DATASET_deaths":return Object(h.a)({},e,{deaths:t.value});case"FETCHED_DATASET_confirmed":return Object(h.a)({},e,{allIds:t.value.map((function(e){return e.id})),cases:t.value});case"FETCHED_TIMESTAMP_deaths":return Object(h.a)({},e,{deathsTimestamp:t.value});case"FETCHED_TIMESTAMP_confirmed":return Object(h.a)({},e,{casesTimestamp:t.value});case"TOGGLE_ID_FILTER":return Object(h.a)({},e,{filters:Object(h.a)({},e.filters,Object(f.a)({},t.id,!e.filters[t.id]))});case"FORM_CONTROL_TOGGLE":return Object(h.a)({},e,{chartState:Object(h.a)({},e.chartState,Object(f.a)({},t.value.chartId,Object(h.a)({},e.chartState[t.value.chartId],{},t.value.update)))});case"DATA_LOADED":return Object(h.a)({},e,{loading:!1});default:return e}},R=Object(s.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;if(t.type.startsWith("global_")){var a=Object(h.a)({},t,{type:t.type.replace("global_","")}),n=B(e.global,a);return Object(h.a)({},e,{global:n})}if(t.type.startsWith("US_")){var r=Object(h.a)({},t,{type:t.type.replace("US_","")}),o=B(e.US,r);return Object(h.a)({},e,{US:o})}return console.error("Unexpected action type",t.type),e}),Object(s.a)(d.a,p.a)),F=a(34),H=a(61),V=a(92),W=a(614),K=a(613),J=a(610),Y=function(e){var t=e.spec,a=e.base;return i.a.createElement("div",{id:"right-nav"},t.map((function(e){var t=e.group,n=e.pages;return i.a.createElement(J.a,{key:t,component:"nav"},i.a.createElement(V.a,{variant:"body1",gutterBottom:!0,style:{paddingLeft:"12px"}},t),n.map((function(e){var t=e.id,n=e.label;return i.a.createElement("li",{className:"right-nav-item",key:t},i.a.createElement(K.a,{color:"textSecondary",underline:"none",variant:"body1",component:F.b,to:"".concat(a,"/").concat(t),activeClassName:"active"},n))})))})))},q=function(){return i.a.createElement("div",{id:"main-container"},i.a.createElement(W.a,{maxWidth:"sm",id:"main-content"},i.a.createElement(V.a,{variant:"h4",gutterBottom:!0},"About This Project"),i.a.createElement(V.a,{variant:"body2",gutterBottom:!0},"As the coronavirus spreads across the world, it can be hard to keep up with the day to day impact, as well as the variance of impact around the world. The goal of this project is to provide detailed but easy to understand visualizations to help people follow this pandemic."),i.a.createElement(V.a,{variant:"body2",gutterBottom:!0},"Most charts provided offer multiple views. You can toggle log scale or visualize growth normalized by days since 50 cases in a specific region. There are also different cuts, such as cumulative growth or rate of change."),i.a.createElement(V.a,{variant:"body2"},"Not sure where to start? Try one of these:"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(K.a,{variant:"body2",component:F.b,to:"global/deaths-cumulative"},"Cumulative Global Deaths")),i.a.createElement("li",null,i.a.createElement(K.a,{variant:"body2",component:F.b,to:"united-states/cases-cumulative"},"Cumulative US Cases"))),i.a.createElement(V.a,{variant:"h5",gutterBottom:!0},"Data"),i.a.createElement(V.a,{variant:"body2",gutterBottom:!0},"All data provided by Center for Systems Science and Engineering at Johns Hopkins University (",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CSSEGISandData/COVID-19"},"source"),")."),i.a.createElement(V.a,{variant:"body2",gutterBottom:!0},"The underlying datasets from Johns Hopkins University are updated roughly every 12 hours, and all visualizations will show when the data was last updated."),i.a.createElement(V.a,{variant:"h5",gutterBottom:!0},"Questions or Feedback?"),i.a.createElement(V.a,{variant:"body2",gutterBottom:!0},"Tweet me at"," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/TyGuyO"},"@tyguyo"),", ","or open an issue on"," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/TGOlson/covid-viz"},"GitHub"),".")),i.a.createElement(Y,{base:"/",spec:[]}))},X=a(626),Q=a(618),Z=a(630),$=a(616),ee=a(617),te=a(615),ae=a(284),ne=a.n(ae),re=function(e){var t=e.filteredIds,a=e.idGroupings,n=e.onFilterToggle,r=function(e){return i.a.createElement(te.a,{disableSticky:!0,component:"div"},e)},o=i.a.createElement($.a,null,i.a.createElement(ne.a,{color:"primary",fontSize:"small"})),c=function(e){return i.a.createElement(Z.a,{key:e,button:!0,onClick:function(){return n(e)}},i.a.createElement(ee.a,{key:e,primary:e,style:{marginLeft:"24px"}}),t[e]?o:null)};return a.map((function(e){var t=e.label,a=e.ids;return i.a.createElement(J.a,{component:"nav",key:t,dense:!0,subheader:r(t)},a.map(c))}))};re.defaultProps={allCountries:null};var oe=re,ie="US",ce="global",le="confirmed",ue=function(e,t){return"".concat("csse_covid_19_data/csse_covid_19_time_series","/time_series_covid19_").concat(t,"_").concat(e,".csv")},se=function(e,t){return"".concat("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master","/").concat(ue(e,t))},de=function(e,t){return"".concat("https://api.github.com/repos/CSSEGISandData/COVID-19/commits","?path=").concat(ue(e,t).replace(/\//g,"%2F"),"&page=1&per_page=1&ref=master")},me=(se(ce,"deaths"),se(ce,le),de(ce,"deaths"),de(ce,le),function(e){var t=e.store,a=e.dispatch,n=function(e){switch(e.split("/")[1]){case"global":return ce;case"united-states":return ie;default:return null}}(e.location.pathname),r=n&&function(e,t){switch(e){case ce:return t.global;case ie:return t.US;default:throw new Error("Unexpected match fail 'getReducer': ".concat(e))}}(n,t),o=r||{},c=o.filters,l=(o.allIds,o.idGroupings),u=r?i.a.createElement(oe,{filteredIds:c,idGroupings:l,onFilterToggle:function(e){return a({type:"".concat(n,"_TOGGLE_ID_FILTER"),id:e})}}):null;return i.a.createElement("nav",{id:"left-nav"},i.a.createElement(X.a,{variant:"permanent",open:!0,PaperProps:{style:{width:"240px"}}},i.a.createElement(Q.a,{style:{marginTop:"64px",marginRight:"24px"}}),u))});me.defaultProps={};var pe=Object(H.g)(Object(u.b)((function(e){return{store:e}}))(me)),fe=a(553),he=a(621),ge=a(622),be=a(628),ve=a(21),ye=a(28),Ee=a(52),Se=a(51),De=a(285),Oe=a(202),Te=a.n(Oe),Ce=a(0),we=a.n(Ce),xe=we.a.arrayOf(we.a.shape({x:we.a.oneOfType([we.a.string,we.a.number]),y:we.a.oneOfType([we.a.string,we.a.number])})),_e=(we.a.shape({cases:xe,deaths:xe,filters:we.a.objectOf(we.a.bool).isRequired,chartState:we.a.objectOf(we.a.shape({logScale:we.a.bool,normalizeDays:we.a.bool})).isRequired}),we.a.shape({title:we.a.string,group:we.a.string,label:we.a.string,getData:we.a.func,getUpdatedAt:we.a.func,logScale:we.a.bool,normalizeDays:we.a.number}),function(e){return{id:e.id,data:e.data.filter((function(e){return 0!==e.y}))}}),je=function(e){Object(Se.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(ve.a)(this,a),(n=t.call(this,e)).state={chart:null},n}return Object(ye.a)(a,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e,t){var a=!Te()(e,this.props),n=!Te()(Object(h.a)({},t,{chart:null}),Object(h.a)({},this.state,{chart:null}));(a||n)&&this.renderChart()}},{key:"renderChart",value:function(){var e,t=this,a=this.props,n=a.data,r=a.logScale,o=a.normalizeDays,c=n;o&&(e=o,c=c.map((function(t){var a=t.data.filter((function(t){return t.y>=e})).map((function(e,t){return{x:t,y:e.y}}));return Object(h.a)({},t,{data:a})}))),r&&(c=c.map(_e));var l={type:"linear",min:o?0:"auto",max:"auto"},u=r?{type:"log",base:10,max:1e6}:{type:"linear",min:0,max:"auto"},s=o?void 0:function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},d=r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,m={orient:"bottom",tickSize:5,tickPadding:5,tickValues:10,format:s,legend:"Number of days since Nth case",legendOffset:36,legendPosition:"middle"},p={orient:"left",tickValues:r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,tickSize:5,tickPadding:5,tickRotation:0,legend:"Count",legendOffset:-50,legendPosition:"middle"},f=i.a.createElement(De.a,{data:c,margin:{top:50,right:110,bottom:50,left:60},xScale:l,yScale:u,xFormat:s,axisBottom:m,gridYValues:d,axisLeft:p,isInteractive:!0,useMesh:!0,enableGridX:!1,enableSlices:"x",legends:[{anchor:"top-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]});setTimeout((function(){return t.setState({chart:f})}),0)}},{key:"render",value:function(){return this.state.chart}}]),a}(i.a.Component);je.defaultProps={logScale:!1,normalizeDays:null};var ke=je,Ae=function(e){var t=e.title,a=e.data,n=e.updatedAt,r=e.logScaleToggle,o=e.normalizeDaysToggle,c=e.logScale,l=e.normalizeDays,u=e.onControlToggle,s=new Date(n),d=s.toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"}),m=s.toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"}),p=n?"Data as of ".concat(d," on ").concat(m,"."):"Data normally updated every 12 hours.";return i.a.createElement("div",null,i.a.createElement(V.a,{variant:"h4",style:{marginBottom:"12px"}},t),i.a.createElement(V.a,{variant:"caption",display:"block",gutterBottom:!0,style:{fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},p),i.a.createElement(he.a,{id:"chart-toggles",row:!0,style:{flexDirection:"row-reverse",marginBottom:"6px"}},i.a.createElement(ge.a,{control:i.a.createElement(be.a,{size:"small",checked:c,onChange:function(){return u("logScale")}}),label:"Log Scale",disabled:!r}),i.a.createElement(ge.a,{control:i.a.createElement(be.a,{size:"small",checked:l,onChange:function(){return u("normalizeDays")}}),label:"Normalize Days",disabled:!o})),i.a.createElement(fe.a,{variant:"outlined",style:{marginTop:"12px",marginBottom:"6px",margin:"auto",padding:"0 32px 18px"}},i.a.createElement(W.a,{style:{height:"500px",maxWidth:"800px"},disableGutters:!0},i.a.createElement(ke,{data:a,logScale:c,normalizeDays:l?o:void 0}))),i.a.createElement(V.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},"Source:"," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CSSEGISandData/COVID-19"},"Center for Systems Science and Engineering at Johns Hopkins University"),"."))};Ae.defaultProps={updatedAt:null,logScaleToggle:!1,normalizeDaysToggle:!1};var Ie=Ae,Ue=Object(u.b)((function(e){return{store:e}}))((function(e){var t=e.store,a=e.match,o=e.location,c=e.dispatch,l=function(e){switch(e){case"/global":return ce;case"/united-states":return ie;default:throw new Error("Unexpected match fail 'getNamespace': ".concat(e))}}(a.path),u=function(e){switch(e){case ce:return n;case ie:return r;default:throw new Error("Unexpected match fail 'getSpec': ".concat(e))}}(l),s=u.spec,d=u.defaultChartId,m=function(e,t){switch(e){case ce:return t.global;case ie:return t.US;default:throw new Error("Unexpected match fail 'getReducer': ".concat(e))}}(l,t),p=a.path,h=function(e){return i.a.createElement("div",{id:"main-container"},i.a.createElement(W.a,{maxWidth:"md",id:"main-content"},e),i.a.createElement(Y,{base:p,spec:N(s)}))},g=o.pathname.split("/")[2],b=s[g];if(!g||!b)return i.a.createElement(H.a,{to:"".concat(p,"/").concat(d)});if(m.loading)return h(i.a.createElement("p",null,"Loading..."));var v=m.chartState[g],y=b.getData(m),E=b.getUpdatedAt(m);return h(i.a.createElement(Ie,{title:b.title,data:y,updatedAt:E,logScaleToggle:b.logScale,normalizeDaysToggle:b.normalizeDays,chartState:v,logScale:v.logScale,normalizeDays:v.normalizeDays,onControlToggle:function(e){return c({type:"".concat(l,"_FORM_CONTROL_TOGGLE"),value:{chartId:g,update:Object(f.a)({},e,!v[e])}})}}))})),ze=a(623),Ge=a(624),Ne=a(625),Me=function(){return i.a.createElement(ze.a,{position:"fixed",color:"default",id:"top-nav"},i.a.createElement(Ge.a,null,i.a.createElement(V.a,{variant:"h6",style:{flex:"auto"}},"Covid Dashboard"),i.a.createElement("div",null,i.a.createElement(Ne.a,{color:"inherit",component:F.b,activeClassName:"active",to:"/"},"About"),i.a.createElement(Ne.a,{color:"inherit",component:F.b,activeClassName:"active",to:"/global"},"Global"),i.a.createElement(Ne.a,{color:"inherit",component:F.b,activeClassName:"active",to:"/united-states"},"United States"))))};var Pe=function(){return i.a.createElement(F.a,{basename:"/"},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Me,null),i.a.createElement(pe,null),i.a.createElement(H.d,null,i.a.createElement(H.b,{exact:!0,path:"/",component:q}),i.a.createElement(H.b,{path:"/global",component:Ue}),i.a.createElement(H.b,{path:"/united-states",component:Ue}),i.a.createElement(H.b,{render:function(){return i.a.createElement(H.a,{to:"/"})}}))))},Le=(a(508),a(297)),Be=a.n(Le),Re=a(301),Fe={"Province/State":!0,Lat:!0,Long:!0},He={"Country/Region":"id"},Ve={mapHeaders:function(e){var t=e.header;e.index;return Fe[t]?null:He[t]?He[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);if(!isNaN(t))return parseInt(a,10);if("id"===t)switch(a){case"Korea, South":return"S. Korea";case"Taiwan*":return"Taiwan";case"United Kingdom":return"UK";default:return a}return a}},We={UID:!0,iso2:!0,iso3:!0,code3:!0,FIPS:!0,Admin2:!0,Province_State:!1,Country_Region:!0,Lat:!0,Long_:!0,Combined_Key:!0,Population:!1},Ke={Province_State:"id",Population:"population"},Je={mapHeaders:function(e){var t=e.header;e.index;return We[t]?null:Ke[t]?Ke[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);return isNaN(t)?a:parseInt(a,10)}},Ye=new Re.a,qe=function(e){return!isNaN(e)},Xe=function(e,t){var a=e[t.id]||{},n=Object.keys(t).filter(qe).reduce((function(e,n){return Object(h.a)({},e,Object(f.a)({},n,t[n]+(a[n]||0)))}),{id:t.id});return Object(h.a)({},e,Object(f.a)({},t.id,n))},Qe=function(e){var t=Object.keys(e).filter(qe).map((function(t){return{x:t,y:e[t]}}),[]);return{id:e.id,data:t}},Ze=function(e,t){return fetch(se(e,t)).then((function(e){return e.text()})).then((function(t){return Be()(t,e===ce?Ve:Je)})).then((function(e){return Object.values(e.reduce(Xe,{})).map(Qe)}))},$e=function(e,t){return Ye.repos.listCommits({owner:"CSSEGISandData",repo:"COVID-19",page:1,per_page:1,path:ue(e,t)}).then((function(e){var t=e.data;return t[0]?t[0].commit.committer.date:null})).catch((function(e){return console.error("Error fetching timestamps",e),null}))},et=function(e,t){return function(a){return Promise.all([Ze(e,t).then((function(n){return a({type:"".concat(e,"_FETCHED_DATASET_").concat(t),value:n})})),$e(e,t).then((function(n){return a({type:"".concat(e,"_FETCHED_TIMESTAMP_").concat(t),value:n})}))])}};l.a.render(i.a.createElement(u.a,{store:R},i.a.createElement(Pe,null)),document.getElementById("root")),R.dispatch((function(e){return Promise.all([et(ce,"deaths")(e),et(ce,le)(e)]).then((function(){return e({type:"".concat(ce,"_DATA_LOADED")})}))})),R.dispatch((function(e){return Promise.all([et(ie,"deaths")(e),et(ie,le)(e)]).then((function(){return e({type:"".concat(ie,"_DATA_LOADED")})}))}))}},[[340,1,2]]]);
//# sourceMappingURL=main.f0d0c6a8.chunk.js.map