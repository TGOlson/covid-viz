(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{307:function(e,t,a){e.exports=a(491)},317:function(e,t,a){},318:function(e,t,a){},454:function(e,t){},456:function(e,t){},489:function(e,t){},491:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(39),o=a.n(i),l=a(50),s=a(75),c=a(246),u=a(247),d=a.n(u),m=a(59),g=a(37),f={cases:null,deaths:null,allCountries:null,filteredCountries:{Italy:!0,US:!0,UK:!0,Singapore:!0,France:!1,Spain:!0,Germany:!1,"S. Korea":!0}},p=Object(s.c)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHED_GLOBAL_CASES":return Object(g.a)({},e,{allCountries:t.values.map((function(e){return e.id})),cases:t.values});case"FETCHED_GLOBAL_DEATHS":return Object(g.a)({},e,{deaths:t.values});case"TOGGLE_COUNTRY_FILTER":return Object(g.a)({},e,{filteredCountries:Object(g.a)({},e.filteredCountries,Object(m.a)({},t.country,!e.filteredCountries[t.country]))});default:return e}}}),h=Object(s.d)(p,Object(s.a)(c.a,d.a)),y=(a(316),a(317),a(97)),v=a(52),b=a(546),E=(a(318),a(515)),S=a(0),w=a.n(S),C=(w.a.arrayOf(w.a.shape({x:w.a.oneOfType([w.a.string,w.a.number]),y:w.a.oneOfType([w.a.string,w.a.number])})),a(31)),x=a(24),O=a(263),D=a(264),T=a(248),z=a(544),k=a(514),L=a(516),_=a(547),j=function(e){return{id:e.id,data:e.data.filter((function(e){return 0!==e.y}))}},A=function(e){Object(D.a)(a,e);var t=Object(O.a)(a);function a(e){var n;Object(C.a)(this,a);var r=e.enableLogScale,i=e.enableNormalizeDays;return(n=t.call(this,e)).onLogScaleToggle=function(){var e=n.state.logScale;n.setState({logScale:!e})},n.onNormalizeDaysToggle=function(){var e=n.state.normalizeDays;n.setState({normalizeDays:!e})},n.state={logScale:r,normalizeDays:!!i},n}return Object(x.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.title,n=t.description,i=t.updatedAt,o=t.size,l=t.data,s=t.enableLogScale,c=t.enableNormalizeDays,u=this.state,d=u.logScale,m=u.normalizeDays,f=l;m&&(e=c,f=f.map((function(t){var a=t.data.filter((function(t){return t.y>=e})).map((function(e,t){return{x:t,y:e.y}}));return Object(g.a)({},t,{data:a})}))),d&&(f=f.map(j));var p="large"===o?{height:"500px",maxWidth:"800px"}:{height:"300px",maxWidth:"500px"},h={type:"linear",min:m?0:"auto",max:"auto"},y=d?{type:"log",base:10,max:3e5}:{type:"linear",min:0,max:"auto"},v=m?void 0:function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},S=d?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,w={orient:"bottom",tickSize:5,tickPadding:5,tickValues:10,format:v,legend:"Number of days since Nth case",legendOffset:36,legendPosition:"middle"},C={orient:"left",tickValues:d?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,tickSize:5,tickPadding:5,tickRotation:0,legend:"Count",legendOffset:-50,legendPosition:"middle"},x=function(){},O=s?r.a.createElement(z.a,{variant:"text",size:"small",color:"primary","aria-label":"contained primary button group"},r.a.createElement(k.a,{style:{textDecoration:d?"underline":null},onClick:d?x:this.onLogScaleToggle},"Log scale"),r.a.createElement(k.a,{style:{textDecoration:d?null:"underline"},onClick:d?this.onLogScaleToggle:x},"Linear scale")):null,D=c?r.a.createElement(z.a,{variant:"text",size:"small",color:"primary","aria-label":"contained primary button group"},r.a.createElement(k.a,{style:{textDecoration:m?"underline":null},onClick:m?x:this.onNormalizeDaysToggle},"Normalized days"),r.a.createElement(k.a,{style:{textDecoration:m?null:"underline"},onClick:m?this.onNormalizeDaysToggle:x},"Absolute timeline")):null;return r.a.createElement(b.a,{size:"md",disableGutters:!0,style:{marginTop:"12px",marginBottom:"48px"}},a?r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},a):null,n?r.a.createElement(E.a,{variant:"body2",gutterBottom:!0},n):null,r.a.createElement(E.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"6px"}},"Data last updated at"," ",new Date(i).toLocaleDateString(),"."),r.a.createElement(L.a,{style:Object(g.a)({marginTop:"12px",marginBottom:"6px",margin:"auto"},"small"===o?p:{})},r.a.createElement(b.a,{style:p,disableGutters:!0},r.a.createElement(T.a,{data:f,margin:{top:50,right:110,bottom:50,left:60},xScale:h,yScale:y,xFormat:v,axisBottom:w,gridYValues:S,axisLeft:C,isInteractive:!0,useMesh:!0,enableGridX:!1,enableSlices:"x",legends:[{anchor:"top-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))),r.a.createElement(_.a,{container:!0,justify:"space-between",spacing:8},r.a.createElement(_.a,{item:!0},O),r.a.createElement(_.a,{item:!0},D)))}}]),a}(r.a.Component);A.defaultProps={title:null,description:null,enableLogScale:!1,enableNormalizeDays:null};var B=A,N=function(e){var t=e.id,a=e.data;return{id:t,data:a.map((function(e,t){var n=e.x,r=e.y,i=a[t-1];return{x:n,y:0===t||0===i.y?0:(r-i.y)/i.y}}))}},G=function(e){return function(t){return{id:t.id,data:t.data.filter((function(t){return t.x>=new Date(e).getTime()}))}}};function I(e){var t=e.filteredCountries,a=e.cases,n=e.deaths;if(!a||!n)return r.a.createElement("p",null,"loading...");var i=a.filter((function(e){var a=e.id;return t[a]})),o=n.filter((function(e){var a=e.id;return t[a]})),l=i.map(N).map(G("3/5/2020")),s=o.map(N).map(G("3/5/2020")),c=o.map((function(e){var t=e.id,a=e.data,n=i.find((function(e){return e.id===t})).data,r=a.map((function(e,t){var a=e.x,r=e.y,i=n[t].y;return{x:a,y:0===i?0:r/i}}));return{id:t,data:r}})).map(G("3/5/2020"));return r.a.createElement("div",null,r.a.createElement(B,{title:"Global Cases",updatedAt:new Date("4/1/2020").getTime(),size:"large",data:i,enableLogScale:!0,enableNormalizeDays:50,description:"Overview of coronavirus cases around the world.\n          This shows at a high level, how quickly the virus has spread globally.\n          It is most useful when viewed on a log scale to see the magnitude of increase,\n          as well as a normalized day series to compare rate across countries.\n          However, a linear scale or an absolute time scale can also show interesting trends.\n          One thing to keep in mind when viewing global case counts\n          is that many countries have different testing standards,\n          as well as capacities. This means that confirmed cases might differ\n          substantially from actual case counts in certain countries."}),r.a.createElement(B,{title:"Global Deaths",updatedAt:new Date("4/1/2020").getTime(),size:"large",data:o,enableLogScale:!0,enableNormalizeDays:10,description:"Overview of coronavirus deaths around the world.\n          This is another view on how the virus has spread around the world.\n          It is likely a much more lagging indicator than global cases\n          (possibly on the order of 1-2 weeks), but also might offer a slightly less biased\n          view on impact per region, as deaths are more likely to be\n          accurately tracked than overall cases."}),r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},"Day Overy Day Changes"),r.a.createElement(E.a,{variant:"body2",gutterBottom:!0},"Rate change from previous day. Potentially noisy on a day-by-day basis but useful to get a sense of directional trends. Lines converging on 10% day-over-day growth means cases or deaths double roughly every week. Lines converging on 20% 10% day-over-day growth means cases or deaths double roughly every 3-4 days. Note: only shows data after March 5th."),r.a.createElement("div",null,r.a.createElement(B,{size:"small",updatedAt:new Date("4/1/2020").getTime(),data:l}),r.a.createElement(B,{size:"small",updatedAt:new Date("4/1/2020").getTime(),data:s})),r.a.createElement(B,{title:"Mortality Rate",updatedAt:new Date("4/1/2020").getTime(),size:"large",data:c,description:"Cumulative total mortality rate by day, defined as cumulative deaths over cases per country.\n          A spike upwards could indicate either medical failures or reduced testing capacity,\n          while a spike downwards could indicate increased medical capacity or increased testing.\n          Note: only shows data after March 5th."}))}I.defaultProps={cases:null,deaths:null};var P=Object(l.b)((function(e){var t=e.global;return{cases:t.cases,deaths:t.deaths,filteredCountries:t.filteredCountries}}))(I);function F(e){return r.a.createElement("p",null,"US overview here")}F.defaultProps={cases:null,deaths:null};var U=Object(l.b)((function(e){var t=e.global;return{cases:t.cases,deaths:t.deaths,countries:t.filteredCountries}}))(F),H=a(552),K=a(553),R=a(558),M=a(557),V=a(548),W=a(549),Y=a(556),J=a(554),X=a(550),q=a(551),Q=a(260),Z=a.n(Q),$=[{region:"Americas",countries:["US","Canada","Mexico","Brazil"]},{region:"Europe",countries:["UK","Spain","France","Germany"]},{region:"Europe",countries:["Italy","Switzerland","Belgium","Netherlands"]},{region:"APAC",countries:["Singapore","Taiwan","Japan","S. Korea","Australia"]}];function ee(e){e.allCountries;var t=e.filteredCountries,a=e.onFilterToggle,n=$.map((function(e){var n=e.region,i=e.countries;return r.a.createElement(M.a,{component:"fieldset",key:n,margin:"dense",size:"small"},r.a.createElement(R.a,{component:"legend"},n),r.a.createElement(V.a,null,i.map((function(e){var n=r.a.createElement(Y.a,{checked:t[e],size:"small",name:e,color:"primary",onChange:function(){return a(e)}});return r.a.createElement(W.a,{key:e,control:n,label:e})}))))}));return r.a.createElement(J.a,{elevation:"0"},r.a.createElement(X.a,{expandIcon:r.a.createElement(Z.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(E.a,{variant:"body1"},"Select countries...")),r.a.createElement(q.a,null,n))}ee.defaultProps={allCountries:null};var te=ee,ae=function(e){var t=e.dispatch,a=e.filteredCountries,n=e.allCountries;return r.a.createElement(H.a,{position:"sticky",color:"default"},r.a.createElement(K.a,null,r.a.createElement(E.a,{variant:"h6",style:{flex:"auto"}},"Covid Dashboard"),r.a.createElement("div",null,r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/"},"Global"),r.a.createElement(k.a,{color:"inherit",component:y.b,to:"/united-states"},"United States"))),r.a.createElement(te,{filteredCountries:a,allCountries:n,onFilterToggle:function(e){return t({type:"TOGGLE_COUNTRY_FILTER",country:e})}}))};ae.defaultProps={allCountries:null};var ne=Object(l.b)((function(e){var t=e.global;return{allCountries:t.allCountries,filteredCountries:t.filteredCountries}}))(ae);var re=function(){return r.a.createElement(y.a,{basename:"/"},r.a.createElement(b.a,{maxWidth:"md"},r.a.createElement(ne,null),r.a.createElement(v.a,{exact:!0,path:"/",component:P}),r.a.createElement(v.a,{path:"/united-states",component:U})))},ie=a(262),oe=a.n(ie),le="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series",se="".concat(le,"/time_series_covid19_confirmed_global.csv"),ce="".concat(le,"/time_series_covid19_deaths_global.csv"),ue={"Province/State":!0,Lat:!0,Long:!0},de={"Country/Region":"id"},me=function(e){return!isNaN(e)},ge={mapHeaders:function(e){var t=e.header;e.index;return ue[t]?null:de[t]?de[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);if(me(t))return parseInt(a,10);if("id"===t)switch(a){case"Korea, South":return"S. Korea";case"Taiwan*":return"Taiwan";case"United Kingdom":return"UK";default:return a}return a}},fe=function(e,t){var a=e[t.id]||{},n=Object.keys(t).filter(me).reduce((function(e,n){return Object(g.a)({},e,Object(m.a)({},n,t[n]+(a[n]||0)))}),{id:t.id});return Object(g.a)({},e,Object(m.a)({},t.id,n))},pe=function(e){var t=Object.keys(e).filter(me).map((function(t){return{x:t,y:e[t]}}),[]);return{id:e.id,data:t}},he=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return oe()(e,ge)})).then((function(e){return Object.values(e.reduce(fe,{})).map(pe)}))};o.a.render(r.a.createElement(l.a,{store:h},r.a.createElement(re,null)),document.getElementById("root")),h.dispatch((function(e){return he(se).then((function(t){return e({type:"FETCHED_GLOBAL_CASES",values:t})}))})),h.dispatch((function(e){return he(ce).then((function(t){return e({type:"FETCHED_GLOBAL_DEATHS",values:t})}))}))}},[[307,1,2]]]);
//# sourceMappingURL=main.b88cabf3.chunk.js.map