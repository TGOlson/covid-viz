(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{339:function(e,t,a){e.exports=a(550)},501:function(e,t){},507:function(e,t,a){},511:function(e,t){},513:function(e,t){},544:function(e,t){},550:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"filters",(function(){return _})),a.d(n,"idGroupings",(function(){return j})),a.d(n,"defaultChartId",(function(){return w})),a.d(n,"spec",(function(){return A}));var r={};a.r(r),a.d(r,"filters",(function(){return I})),a.d(r,"idGroupings",(function(){return k})),a.d(r,"defaultChartId",(function(){return U})),a.d(r,"spec",(function(){return z}));var o=a(1),i=a.n(o),c=a(19),l=a.n(c),u=a(83),s=a(107),d=a(280),m=a(281),p=a.n(m),f=a(22),g=a(14),h=function(e){return function(t){var a=e(t),n=function(e){return e.filters}(t);return a.filter((function(e){var t=e.id;return n[t]}))}},b=h((function(e){return e.deaths})),y=h((function(e){return e.cases})),v=function(e){return e.deathsTimestamp},E=function(e){return e.casesTimestamp},S=function(e){var t=e.id,a=e.data;return{id:t,data:a.map((function(e,t){var n=e.x,r=e.y,o=a[t-1];return{x:n,y:0===t||0===o.y?0:(r-o.y)/o.y}}))}},D=function(e){return function(t){return{id:t.id,data:t.data.filter((function(t){return t.x>=new Date(e).getTime()}))}}},O=function(e){return y(e).map(S).map(D("3/5/2020"))},T=function(e){return b(e).map(S).map(D("3/5/2020"))},x=function(e){return b(e).map((function(t){var a=t.id,n=t.data,r=y(e).find((function(e){return e.id===a})).data,o=n.map((function(e,t){var a=e.x,n=e.y,o=r[t].y;return{x:a,y:0===o?0:n/o}}));return{id:a,data:o}})).map(D("3/5/2020"))},C=function(e){return{"deaths-cumulative":{title:"Cumulative ".concat(e," Deaths"),group:"Deaths",label:"Cumulative",getData:b,getUpdatedAt:v,logScale:!0,normalizeDays:10},"deaths-change-rate":{title:"".concat(e," Deaths Daily Rate of Change"),group:"Deaths",label:"Rate of Change",getData:T,getUpdatedAt:v},"cases-cumulative":{title:"Cumulative ".concat(e," Cases"),group:"Cases",label:"Cumulative",getData:y,getUpdatedAt:E,logScale:!0,normalizeDays:50},"cases-change-rate":{title:"".concat(e," Cases Daily Rate of Change"),group:"Cases",label:"Rate of Change",getData:O,getUpdatedAt:E},"mortality-rate":{title:"".concat(e," Mortality Rate"),group:"Other",label:"Mortality Rate",getData:x,getUpdatedAt:v}}},_={Italy:!0,US:!0,UK:!0,Singapore:!0,France:!1,Spain:!1,Germany:!1,"S. Korea":!1},j=[{label:"Americas",ids:["US","Canada","Mexico","Brazil"]},{label:"Europe",ids:["UK","Spain","France","Germany","Italy","Switzerland","Belgium","Netherlands"]},{label:"APAC",ids:["Singapore","Taiwan","Japan","S. Korea","Australia"]}],w="deaths-cumulative",A=C("Global"),I={California:!0,Florida:!0,Minnesota:!0,"New York":!0,Washington:!0},k=[{label:"Midwest",ids:["Minnesota","Iowa"]},{label:"West Coast",ids:["California","Washington","Oregon"]},{label:"East Coast",ids:["New York"]}],U="deaths-cumulative",z=C("US"),G=a(143),L=function(e){return Object.values(Object.keys(e).reduce((function(t,a){var n=e[a],r=n.group,o=n.label,i=t[r]?t[r].pages:[],c=[].concat(Object(G.a)(i),[{id:a,label:o}]);return Object(g.a)({},t,Object(f.a)({},r,{group:r,pages:c}))}),{}))},P=function(e){return Object.keys(e).reduce((function(t,a){return Object(g.a)({},t,Object(f.a)({},a,{logScale:!!e[a].logScale,normalizeDays:!1}))}),{})},R=function(e){var t=e.filters,a=e.spec;return{cases:null,casesTimestamp:null,deaths:null,deathsTimestamp:null,allIds:null,filters:t,idGroupings:e.idGroupings,chartState:P(a),loading:!0}},F={global:R(n),US:R(r)},N=function(e,t){switch(t.type){case"FETCHED_DATASET_deaths":return Object(g.a)({},e,{deaths:t.value});case"FETCHED_DATASET_confirmed":return Object(g.a)({},e,{allIds:t.value.map((function(e){return e.id})),cases:t.value});case"FETCHED_TIMESTAMP_deaths":return Object(g.a)({},e,{deathsTimestamp:t.value});case"FETCHED_TIMESTAMP_confirmed":return Object(g.a)({},e,{casesTimestamp:t.value});case"TOGGLE_ID_FILTER":return Object(g.a)({},e,{filters:Object(g.a)({},e.filters,Object(f.a)({},t.id,!e.filters[t.id]))});case"FORM_CONTROL_TOGGLE":return Object(g.a)({},e,{chartState:Object(g.a)({},e.chartState,Object(f.a)({},t.value.chartId,Object(g.a)({},e.chartState[t.value.chartId],{},t.value.update)))});case"DATA_LOADED":return Object(g.a)({},e,{loading:!1});default:return e}},M=Object(s.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;if(t.type.startsWith("global_")){var a=Object(g.a)({},t,{type:t.type.replace("global_","")}),n=N(e.global,a);return Object(g.a)({},e,{global:n})}if(t.type.startsWith("US_")){var r=Object(g.a)({},t,{type:t.type.replace("US_","")}),o=N(e.US,r);return Object(g.a)({},e,{US:o})}return console.error("Unexpected action type",t.type),e}),Object(s.a)(d.a,p.a)),B=a(43),H=a(61),K=function(){return i.a.createElement("p",null,"About")},V=a(626),W=a(616),J=a(615),Y=a(630),q=a(613),X=a(614),Q=a(610),Z=a(282),$=a.n(Z),ee=function(e){var t=e.filteredIds,a=e.idGroupings,n=e.onFilterToggle,r=function(e){return i.a.createElement(Q.a,{disableSticky:!0,component:"div"},e)},o=i.a.createElement(q.a,null,i.a.createElement($.a,{color:"primary",fontSize:"small"})),c=function(e){return i.a.createElement(Y.a,{key:e,button:!0,onClick:function(){return n(e)}},i.a.createElement(X.a,{key:e,primary:e,style:{marginLeft:"24px"}}),t[e]?o:null)};return a.map((function(e){var t=e.label,a=e.ids;return i.a.createElement(J.a,{component:"nav",key:t,dense:!0,subheader:r(t)},a.map(c))}))};ee.defaultProps={allCountries:null};var te=ee,ae="US",ne="global",re="confirmed",oe=function(e,t){return"".concat("csse_covid_19_data/csse_covid_19_time_series","/time_series_covid19_").concat(t,"_").concat(e,".csv")},ie=function(e,t){return"".concat("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master","/").concat(oe(e,t))},ce=function(e,t){return"".concat("https://api.github.com/repos/CSSEGISandData/COVID-19/commits","?path=").concat(oe(e,t).replace(/\//g,"%2F"),"&page=1&per_page=1&ref=master")},le=(ie(ne,"deaths"),ie(ne,re),ce(ne,"deaths"),ce(ne,re),function(e){var t=e.store,a=e.dispatch,n=function(e){switch(e.split("/")[1]){case"global":return ne;case"united-states":return ae;default:return null}}(e.location.pathname),r=n&&function(e,t){switch(e){case ne:return t.global;case ae:return t.US;default:throw new Error("Unexpected match fail 'getReducer': ".concat(e))}}(n,t)||{},o=r.filters,c=(r.allIds,r.idGroupings);return i.a.createElement("nav",{id:"left-nav"},i.a.createElement(V.a,{variant:"permanent",open:!0,PaperProps:{style:{width:"240px"}}},i.a.createElement(W.a,{style:{marginTop:"64px",marginRight:"24px"}}),i.a.createElement(te,{filteredIds:o,idGroupings:c,onFilterToggle:function(e){return a({type:"".concat(n,"_TOGGLE_ID_FILTER"),id:e})}})))});le.defaultProps={};var ue=Object(H.f)(Object(u.b)((function(e){return{store:e}}))(le)),se=a(622),de=a(617),me=a(91),pe=function(e){var t=e.spec,a=e.base;return i.a.createElement("div",{id:"right-nav"},t.map((function(e){var t=e.group,n=e.pages;return i.a.createElement(J.a,{key:t,component:"nav"},i.a.createElement(me.a,{variant:"body1",gutterBottom:!0,style:{paddingLeft:"12px"}},t),n.map((function(e){var t=e.id,n=e.label;return i.a.createElement("li",{className:"right-nav-item",key:t},i.a.createElement(de.a,{color:"textSecondary",underline:"none",variant:"body1",component:B.c,to:"".concat(a,"/").concat(t),activeClassName:"active"},n))})))})))},fe=a(552),ge=a(620),he=a(621),be=a(628),ye=a(21),ve=a(28),Ee=a(52),Se=a(51),De=a(284),Oe=a(202),Te=a.n(Oe),xe=a(0),Ce=a.n(xe),_e=Ce.a.arrayOf(Ce.a.shape({x:Ce.a.oneOfType([Ce.a.string,Ce.a.number]),y:Ce.a.oneOfType([Ce.a.string,Ce.a.number])})),je=(Ce.a.shape({cases:_e,deaths:_e,filters:Ce.a.objectOf(Ce.a.bool).isRequired,chartState:Ce.a.objectOf(Ce.a.shape({logScale:Ce.a.bool,normalizeDays:Ce.a.bool})).isRequired}),Ce.a.shape({title:Ce.a.string,group:Ce.a.string,label:Ce.a.string,getData:Ce.a.func,getUpdatedAt:Ce.a.func,logScale:Ce.a.bool,normalizeDays:Ce.a.number}),function(e){return{id:e.id,data:e.data.filter((function(e){return 0!==e.y}))}}),we=function(e){Object(Se.a)(a,e);var t=Object(Ee.a)(a);function a(e){var n;return Object(ye.a)(this,a),(n=t.call(this,e)).state={chart:null},n}return Object(ve.a)(a,[{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e,t){var a=!Te()(e,this.props),n=!Te()(Object(g.a)({},t,{chart:null}),Object(g.a)({},this.state,{chart:null}));(a||n)&&this.renderChart()}},{key:"renderChart",value:function(){var e,t=this,a=this.props,n=a.data,r=a.logScale,o=a.normalizeDays,c=n;o&&(e=o,c=c.map((function(t){var a=t.data.filter((function(t){return t.y>=e})).map((function(e,t){return{x:t,y:e.y}}));return Object(g.a)({},t,{data:a})}))),r&&(c=c.map(je));var l={type:"linear",min:o?0:"auto",max:"auto"},u=r?{type:"log",base:10,max:1e6}:{type:"linear",min:0,max:"auto"},s=o?void 0:function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},d=r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,m={orient:"bottom",tickSize:5,tickPadding:5,tickValues:10,format:s,legend:"Number of days since Nth case",legendOffset:36,legendPosition:"middle"},p={orient:"left",tickValues:r?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,tickSize:5,tickPadding:5,tickRotation:0,legend:"Count",legendOffset:-50,legendPosition:"middle"},f=i.a.createElement(De.a,{data:c,margin:{top:50,right:110,bottom:50,left:60},xScale:l,yScale:u,xFormat:s,axisBottom:m,gridYValues:d,axisLeft:p,isInteractive:!0,useMesh:!0,enableGridX:!1,enableSlices:"x",legends:[{anchor:"top-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]});setTimeout((function(){return t.setState({chart:f})}),0)}},{key:"render",value:function(){return this.state.chart}}]),a}(i.a.Component);we.defaultProps={logScale:!1,normalizeDays:null};var Ae=we,Ie=function(e){var t=e.title,a=e.data,n=e.updatedAt,r=e.logScaleToggle,o=e.normalizeDaysToggle,c=e.logScale,l=e.normalizeDays,u=e.onControlToggle,s=new Date(n),d=s.toLocaleTimeString([],{hour12:!0,hour:"2-digit",minute:"2-digit"}),m=s.toLocaleDateString([],{year:"numeric",month:"long",day:"numeric"}),p=n?"Data as of ".concat(d," on ").concat(m,"."):"Data normally updated every 12 hours.";return i.a.createElement("div",null,i.a.createElement(me.a,{variant:"h4",style:{marginBottom:"12px",textAlign:"center"}},t),i.a.createElement(me.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},p),i.a.createElement(ge.a,{id:"chart-toggles",row:!0,style:{flexDirection:"row-reverse",marginBottom:"6px"}},i.a.createElement(he.a,{control:i.a.createElement(be.a,{size:"small",checked:c,onChange:function(){return u("logScale")}}),label:"Log Scale",disabled:!r}),i.a.createElement(he.a,{control:i.a.createElement(be.a,{size:"small",checked:l,onChange:function(){return u("normalizeDays")}}),label:"Normalize Days",disabled:!o})),i.a.createElement(fe.a,{variant:"outlined",style:{marginTop:"12px",marginBottom:"6px",margin:"auto",padding:"0 32px 18px"}},i.a.createElement(se.a,{style:{height:"500px",maxWidth:"800px"},disableGutters:!0},i.a.createElement(Ae,{data:a,logScale:c,normalizeDays:l?o:void 0}))),i.a.createElement(me.a,{variant:"caption",display:"block",gutterBottom:!0,style:{textAlign:"center",fontStyle:"italic",marginBottom:"12px",marginTop:"12px"}},"Source:"," ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CSSEGISandData/COVID-19"},"Center for Systems Science and Engineering at Johns Hopkins University"),"."))};Ie.defaultProps={updatedAt:null,logScaleToggle:!1,normalizeDaysToggle:!1};var ke=Ie,Ue=Object(u.b)((function(e){return{store:e}}))((function(e){var t=e.store,a=e.match,o=e.location,c=e.dispatch,l=function(e){switch(e){case"/global":return ne;case"/united-states":return ae;default:throw new Error("Unexpected match fail 'getNamespace': ".concat(e))}}(a.path),u=function(e){switch(e){case ne:return n;case ae:return r;default:throw new Error("Unexpected match fail 'getSpec': ".concat(e))}}(l),s=u.spec,d=u.defaultChartId,m=function(e,t){switch(e){case ne:return t.global;case ae:return t.US;default:throw new Error("Unexpected match fail 'getReducer': ".concat(e))}}(l,t),p=a.path,g=function(e){return i.a.createElement("div",{id:"main-container"},i.a.createElement(se.a,{maxWidth:"md",id:"main-content"},e),i.a.createElement(pe,{base:p,spec:L(s)}))},h=o.pathname.split("/")[2],b=s[h];if(!h||!b)return i.a.createElement(H.a,{to:"".concat(p,"/").concat(d)});if(m.loading)return g(i.a.createElement("p",null,"Loading..."));var y=m.chartState[h],v=b.getData(m),E=b.getUpdatedAt(m);return g(i.a.createElement(ke,{title:b.title,data:v,updatedAt:E,logScaleToggle:b.logScale,normalizeDaysToggle:b.normalizeDays,chartState:y,logScale:y.logScale,normalizeDays:y.normalizeDays,onControlToggle:function(e){return c({type:"".concat(l,"_FORM_CONTROL_TOGGLE"),value:{chartId:h,update:Object(f.a)({},e,!y[e])}})}}))})),ze=a(623),Ge=a(624),Le=a(625),Pe=function(){return i.a.createElement(ze.a,{position:"fixed",color:"default",id:"top-nav"},i.a.createElement(Ge.a,null,i.a.createElement(me.a,{variant:"h6",style:{flex:"auto"}},"Covid Dashboard"),i.a.createElement("div",null,i.a.createElement(Le.a,{color:"inherit",component:B.b,to:"/"},"About"),i.a.createElement(Le.a,{color:"inherit",component:B.b,to:"/global"},"Global"),i.a.createElement(Le.a,{color:"inherit",component:B.b,to:"/united-states"},"United States"))))};var Re=function(){return i.a.createElement(B.a,{basename:"/"},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(Pe,null),i.a.createElement(ue,null),i.a.createElement(H.b,{exact:!0,path:"/",component:K}),i.a.createElement(H.b,{path:"/global",component:Ue}),i.a.createElement(H.b,{path:"/united-states",component:Ue})))},Fe=(a(507),a(296)),Ne=a.n(Fe),Me=a(300),Be={"Province/State":!0,Lat:!0,Long:!0},He={"Country/Region":"id"},Ke={mapHeaders:function(e){var t=e.header;e.index;return Be[t]?null:He[t]?He[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);if(!isNaN(t))return parseInt(a,10);if("id"===t)switch(a){case"Korea, South":return"S. Korea";case"Taiwan*":return"Taiwan";case"United Kingdom":return"UK";default:return a}return a}},Ve={UID:!0,iso2:!0,iso3:!0,code3:!0,FIPS:!0,Admin2:!0,Province_State:!1,Country_Region:!0,Lat:!0,Long_:!0,Combined_Key:!0,Population:!1},We={Province_State:"id",Population:"population"},Je={mapHeaders:function(e){var t=e.header;e.index;return Ve[t]?null:We[t]?We[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);return isNaN(t)?a:parseInt(a,10)}},Ye=new Me.a,qe=function(e){return!isNaN(e)},Xe=function(e,t){var a=e[t.id]||{},n=Object.keys(t).filter(qe).reduce((function(e,n){return Object(g.a)({},e,Object(f.a)({},n,t[n]+(a[n]||0)))}),{id:t.id});return Object(g.a)({},e,Object(f.a)({},t.id,n))},Qe=function(e){var t=Object.keys(e).filter(qe).map((function(t){return{x:t,y:e[t]}}),[]);return{id:e.id,data:t}},Ze=function(e,t){return fetch(ie(e,t)).then((function(e){return e.text()})).then((function(t){return Ne()(t,e===ne?Ke:Je)})).then((function(e){return Object.values(e.reduce(Xe,{})).map(Qe)}))},$e=function(e,t){return Ye.repos.listCommits({owner:"CSSEGISandData",repo:"COVID-19",page:1,per_page:1,path:oe(e,t)}).then((function(e){var t=e.data;return t[0]?t[0].commit.committer.date:null})).catch((function(e){return console.error("Error fetching timestamps",e),null}))},et=function(e,t){return function(a){return Promise.all([Ze(e,t).then((function(n){return a({type:"".concat(e,"_FETCHED_DATASET_").concat(t),value:n})})),$e(e,t).then((function(n){return a({type:"".concat(e,"_FETCHED_TIMESTAMP_").concat(t),value:n})}))])}};l.a.render(i.a.createElement(u.a,{store:M},i.a.createElement(Re,null)),document.getElementById("root")),M.dispatch((function(e){return Promise.all([et(ne,"deaths")(e),et(ne,re)(e)]).then((function(){return e({type:"".concat(ne,"_DATA_LOADED")})}))})),M.dispatch((function(e){return Promise.all([et(ae,"deaths")(e),et(ae,re)(e)]).then((function(){return e({type:"".concat(ae,"_DATA_LOADED")})}))}))}},[[339,1,2]]]);
//# sourceMappingURL=main.eb756798.chunk.js.map