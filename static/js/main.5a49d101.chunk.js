(this["webpackJsonpcovid-viz"]=this["webpackJsonpcovid-viz"]||[]).push([[0],{271:function(e,t,a){e.exports=a(453)},280:function(e,t,a){},281:function(e,t,a){},416:function(e,t){},418:function(e,t){},451:function(e,t){},453:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(96),i=a.n(l),o=a(59),c=a(60),u=a(218),s=a(219),d=a.n(s),m=a(48),f=a(32),v={cases:null,deaths:null,allCountries:null,filteredCountries:{Italy:!0,US:!0,UK:!0,Singapore:!0,France:!1,Spain:!0,Germany:!1,"S. Korea":!0}},h=Object(c.c)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHED_GLOBAL_CASES":return Object(f.a)({},e,{allCountries:t.values.map((function(e){return e.id})),cases:t.values});case"FETCHED_GLOBAL_DEATHS":return Object(f.a)({},e,{deaths:t.values});case"TOGGLE_COUNTRY_FILTER":return Object(f.a)({},e,{filteredCountries:Object(f.a)({},e.filteredCountries,Object(m.a)({},t.country,!e.filteredCountries[t.country]))});default:return e}}}),g=Object(c.d)(h,Object(c.a)(u.a,d.a)),p=(a(280),a(103)),y=a(42),b=(a(281),a(0)),E=a.n(b),S=(E.a.arrayOf(E.a.shape({x:E.a.oneOfType([E.a.string,E.a.number]),y:E.a.oneOfType([E.a.string,E.a.number])})),[{region:"Americas",countries:["US","Canada","Mexico","Brazil"]},{region:"Europe",countries:["UK","Spain","France","Germany","Italy","Switzerland","Belgium","Netherlands"]},{region:"APAC",countries:["Singapore","Taiwan","Japan","S. Korea","Australia"]}]);function O(e){var t=e.allCountries,a=e.filteredCountries,n=e.onFilterToggle;if(!t)return r.a.createElement("p",null,"loading...");var l=S.map((function(e){var t=e.region,l=e.countries;return r.a.createElement("div",{key:t},r.a.createElement("h3",null,t),r.a.createElement("ul",null,l.map((function(e){return r.a.createElement("li",{key:e,onClick:function(){return n(e)}},e," ",a[e]?"X":"")}))))}));return r.a.createElement("div",{style:{display:"inline-flex"}},l)}O.defaultProps={allCountries:null};var C=O,x=a(22),z=a(17),D=a(234),L=a(235),_=a(220),T=function(e){return{id:e.id,data:e.data.filter((function(e){return 0!==e.y}))}},j=function(e){Object(L.a)(a,e);var t=Object(D.a)(a);function a(e){var n;Object(x.a)(this,a);var r=e.enableLogScale,l=e.enableNormalizeDays;return(n=t.call(this,e)).onLogScaleToggle=function(){var e=n.state.logScale;n.setState({logScale:!e})},n.onNormalizeDaysToggle=function(){var e=n.state.normalizeDays;n.setState({normalizeDays:!e})},n.state={logScale:r,normalizeDays:!!l},n}return Object(z.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.size,n=t.data,l=t.enableLogScale,i=t.enableNormalizeDays,o=this.state,c=o.logScale,u=o.normalizeDays,s=n;u&&(e=i,s=s.map((function(t){var a=t.data.filter((function(t){return t.y>=e})).map((function(e,t){return{x:t,y:e.y}}));return Object(f.a)({},t,{data:a})}))),c&&(s=s.map(T));var d="large"===a?{height:"500px",maxWidth:"800px"}:{height:"300px",maxWidth:"500px"},m={type:"linear",min:u?0:"auto",max:"auto"},v=c?{type:"log",base:10,max:3e5}:{type:"linear",min:0,max:"auto"},h=u?void 0:function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})},g=c?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,p={orient:"bottom",tickSize:5,tickPadding:5,tickRotation:-66,tickValues:10,format:h},y={orient:"left",tickValues:c?[10,100,1e3,1e4,1e5,1e6,1e7]:void 0,tickSize:5,tickPadding:5,tickRotation:0},b=l?r.a.createElement("button",{type:"button",onClick:this.onLogScaleToggle},c?"Linear scale":"Log scale"):null,E=i?r.a.createElement("button",{type:"button",onClick:this.onNormalizeDaysToggle},u?"Absolute timeline":"Normalized days"):null;return r.a.createElement("div",{style:d},r.a.createElement(_.a,{data:s,margin:{top:50,right:110,bottom:50,left:60},xScale:m,yScale:v,xFormat:h,axisBottom:p,gridYValues:g,axisLeft:y,isInteractive:!0,useMesh:!0,enableGridX:!1,enableSlices:"x",legends:[{anchor:"right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}),b,E)}}]),a}(r.a.Component);j.defaultProps={enableLogScale:!1,enableNormalizeDays:null};var w=j,k=function(e){var t=e.id,a=e.data;return{id:t,data:a.map((function(e,t){var n=e.x,r=e.y,l=a[t-1];return{x:n,y:0===t||0===l.y?0:(r-l.y)/l.y}}))}},G=function(e){return function(t){return{id:t.id,data:t.data.filter((function(t){return t.x>=new Date(e).getTime()}))}}};function A(e){var t=e.allCountries,a=e.filteredCountries,n=e.cases,l=e.deaths;if(!n||!l)return r.a.createElement("p",null,"loading...");var i=n.filter((function(e){var t=e.id;return a[t]})),o=l.filter((function(e){var t=e.id;return a[t]})),c=i.map(k).map(G("3/5/2020")),u=o.map(k).map(G("3/5/2020")),s=o.map((function(e){var t=e.id,a=e.data,n=i.find((function(e){return e.id===t})).data,r=a.map((function(e,t){var a=e.x,r=e.y,l=n[t].y;return{x:a,y:0===l?0:r/l}}));return{id:t,data:r}})).map(G("3/5/2020"));return r.a.createElement("div",null,r.a.createElement(C,{filteredCountries:a,allCountries:t,onFilterToggle:function(t){return e.dispatch({type:"TOGGLE_COUNTRY_FILTER",country:t})}}),r.a.createElement("h3",null,"Global Cases"),r.a.createElement("p",null,"Overview of coronavirus cases around the world."),r.a.createElement(w,{size:"large",data:i,enableLogScale:!0,enableNormalizeDays:50}),r.a.createElement("h3",null,"Global Deaths"),r.a.createElement("p",null,"Overview of coronavirus deaths around the world."),r.a.createElement(w,{size:"large",data:o,enableLogScale:!0,enableNormalizeDays:10}),r.a.createElement("h3",null,"Day over day changes"),r.a.createElement("p",null,"Percent day over day change in cases and deaths around the world;"),r.a.createElement("div",null,r.a.createElement(w,{size:"small",data:c}),r.a.createElement(w,{size:"small",data:u})),r.a.createElement("h3",null,"Mortality Rate"),r.a.createElement("p",null,"Mortality around the world."),r.a.createElement(w,{size:"large",data:s}))}A.defaultProps={allCountries:null,cases:null,deaths:null};var N=Object(o.b)((function(e){var t=e.global;return{cases:t.cases,deaths:t.deaths,allCountries:t.allCountries,filteredCountries:t.filteredCountries}}))(A);function F(e){var t=e.countries,a=e.cases,n=e.deaths;if(!a||!n)return r.a.createElement("p",null,"loading...");var l=a.filter((function(e){var a=e.id;return t.includes(a)})),i=n.filter((function(e){var a=e.id;return t.includes(a)}));return r.a.createElement("div",null,r.a.createElement("h3",null,"Global Cases"),r.a.createElement("p",null,"Overview of coronavirus cases around the world."),r.a.createElement(w,{size:"large",data:l,enableLogScale:!0}),r.a.createElement("h3",null,"Global Deaths"),r.a.createElement("p",null,"Overview of coronavirus deaths around the world."),r.a.createElement(w,{size:"large",data:i,enableLogScale:!0}))}F.defaultProps={cases:null,deaths:null};var B=Object(o.b)((function(e){var t=e.global;return{cases:t.cases,deaths:t.deaths,countries:t.filteredCountries}}))(F);var U=function(){return r.a.createElement(p.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Global")),r.a.createElement("li",null,r.a.createElement(p.b,{to:"/unitedstates"},"United States"))),r.a.createElement("hr",null),r.a.createElement(y.a,{exact:!0,path:"/",component:N}),r.a.createElement(y.a,{path:"/unitedstates",component:B})))},H=a(233),I=a.n(H),P="https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series",K="".concat(P,"/time_series_covid19_confirmed_global.csv"),R="".concat(P,"/time_series_covid19_deaths_global.csv"),V={"Province/State":!0,Lat:!0,Long:!0},M={"Country/Region":"id"},Y=function(e){return!isNaN(e)},J={mapHeaders:function(e){var t=e.header;e.index;return V[t]?null:M[t]?M[t]:/\d{1,2}\/\d{1,2}\/\d{2}/.test(t)?new Date(t).getTime():(console.warn("Header not transformed:",t),t)},mapValues:function(e){var t=e.header,a=(e.index,e.value);if(Y(t))return parseInt(a,10);if("id"===t)switch(a){case"Korea, South":return"S. Korea";case"Taiwan*":return"Taiwan";case"United Kingdom":return"UK";default:return a}return a}},W=function(e,t){var a=e[t.id]||{},n=Object.keys(t).filter(Y).reduce((function(e,n){return Object(f.a)({},e,Object(m.a)({},n,t[n]+(a[n]||0)))}),{id:t.id});return Object(f.a)({},e,Object(m.a)({},t.id,n))},X=function(e){var t=Object.keys(e).filter(Y).map((function(t){return{x:t,y:e[t]}}),[]);return{id:e.id,data:t}},q=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return I()(e,J)})).then((function(e){return Object.values(e.reduce(W,{})).map(X)}))};i.a.render(r.a.createElement(o.a,{store:g},r.a.createElement(U,null)),document.getElementById("root")),g.dispatch((function(e){return q(K).then((function(t){return e({type:"FETCHED_GLOBAL_CASES",values:t})}))})),g.dispatch((function(e){return q(R).then((function(t){return e({type:"FETCHED_GLOBAL_DEATHS",values:t})}))}))}},[[271,1,2]]]);
//# sourceMappingURL=main.5a49d101.chunk.js.map